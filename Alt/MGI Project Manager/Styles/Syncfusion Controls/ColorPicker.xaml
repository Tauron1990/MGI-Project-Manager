<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:tools_shared="clr-namespace:Syncfusion.Windows.Tools;assembly=Syncfusion.Shared.Wpf"
	xmlns:shared="clr-namespace:Syncfusion.Windows.Shared;assembly=Syncfusion.Shared.Wpf"
    xmlns:Sync_Shared_Resources="clr-namespace:Syncfusion.Windows.Shared.Resources;assembly=Syncfusion.Shared.Wpf"
    >

	<ResourceDictionary.MergedDictionaries>

</ResourceDictionary.MergedDictionaries>

<LinearGradientBrush x:Key="BackgroundBrush" StartPoint="0,0" EndPoint="1,1" ><GradientStop Color="#FFEEEEF2" Offset="0" /><GradientStop Color="#FFEEEEF2" Offset="1" /></LinearGradientBrush>
    <SolidColorBrush x:Key="BorderBrush" Color="#FFCCCEDB" />
	<SolidColorBrush x:Key="ForegroundBrush" Color="#FF404040" />
	<SolidColorBrush x:Key="GlyphBrush" Color="#FF404040" />
<LinearGradientBrush x:Key="HeaderBackgroundBrush" StartPoint="0,0" EndPoint="1,1" ><GradientStop Color="#FFEEEEF2" Offset="0" /><GradientStop Color="#FFEEEEF2" Offset="1" /></LinearGradientBrush>
    <SolidColorBrush x:Key="HeaderBorderBrush" Color="#FFCCCEDB" />
	<SolidColorBrush x:Key="HeaderForegroundBrush" Color="#FF404040" />
	<SolidColorBrush x:Key="HeaderGlyphBrush" Color="#FF404040" />
<LinearGradientBrush x:Key="HoverBackgroundBrush" StartPoint="0,0" EndPoint="1,1" ><GradientStop Color="#FF7FBCE5" Offset="0" /><GradientStop Color="#FF7FBCE5" Offset="1" /></LinearGradientBrush>
    <SolidColorBrush x:Key="HoverBorderBrush" Color="#FF7FBCE5" />
	<SolidColorBrush x:Key="HoverForegroundBrush" Color="#FF404040" />
	<SolidColorBrush x:Key="HoverGlyphBrush" Color="#FF404040" />
<LinearGradientBrush x:Key="ActiveBackgroundBrush" StartPoint="0,0" EndPoint="1,1" ><GradientStop Color="#FF007ACC" Offset="0" /><GradientStop Color="#FF007ACC" Offset="1" /></LinearGradientBrush>
    <SolidColorBrush x:Key="ActiveBorderBrush" Color="#FF007ACC" />
	<SolidColorBrush x:Key="ActiveForegroundBrush" Color="#FFFFFFFF" />
	<SolidColorBrush x:Key="ActiveGlyphBrush" Color="#FFFFFFFF" />
	<SolidColorBrush x:Key="ContentBackgroundBrush" Color="#FFF5F5F5" />
	<SolidColorBrush x:Key="ContentBorderBrush" Color="#FFCCCEDB" />
	<SolidColorBrush x:Key="ContentForegroundBrush" Color="#FF1E1E1E" />
	<SolidColorBrush x:Key="ContentSelectionBrush" Color="#FFA5A5A5" />
	<SolidColorBrush x:Key="SelectionInActiveBrush" Color="#FF99C9EA" />
	<SolidColorBrush x:Key="ErrorBrush" Color="#FFFF0000" />
	<SolidColorBrush x:Key="ActiveLightBackground" Color="#FF99C9EA" />
	<SolidColorBrush x:Key="ActiveDarkBackground" Color="#FF003D66" />
	<SolidColorBrush x:Key="ContentAlternativeBackground" Color="#FFDCDCDC" />
	<SolidColorBrush x:Key="TickColor" Color="#FFBCBCBC" />
	<SolidColorBrush x:Key="RangeColor1" Color="#FF61A301" />	
	<SolidColorBrush x:Key="RangeColor2" Color="#FFF2E606" />	
	<SolidColorBrush x:Key="RangeColor3" Color="#FFFF0000" />
	<SolidColorBrush x:Key="LightBackgroundBrush" Color="#FFDDDDE5" />

	
    <FontFamily x:Key="ColorPickerFontFamily">Segoe UI</FontFamily>

    <tools_shared:ValueToStringConverter x:Key="FloatToString"></tools_shared:ValueToStringConverter>
    <tools_shared:ColorToStringConverter x:Key="ColorToString"></tools_shared:ColorToStringConverter>
    <tools_shared:ColorToValueConverter x:Key="ColorToValue"></tools_shared:ColorToValueConverter>
    <tools_shared:ColorToBrushConverter x:Key="ColorToBrush"></tools_shared:ColorToBrushConverter>
    <tools_shared:ColorToWordKnownColorsConverter x:Key="ColorToWordKnownColors"></tools_shared:ColorToWordKnownColorsConverter>
    <tools_shared:RGBToStringConverter x:Key="RGBToString"></tools_shared:RGBToStringConverter>
    <tools_shared:RangedFloatToStringConverter x:Key="RangedFloatToString"></tools_shared:RangedFloatToStringConverter>
    <shared:ColorItemList x:Key="ColorList" />
    <PathGeometry x:Key="geometry" Figures="M0,0L3.5,4 7,0z" />
<Sync_Shared_Resources:ResourceWrapper x:Key="ResourceWrapperKey" />
    <!--Brushes-->

    <SolidColorBrush x:Key="SyncWhiteBrush" Color="#FFFFFFFF" />

    <SolidColorBrush x:Key="SyncMetroSolidButtonBackground" Color="#FFA4A4A4" />

    <LinearGradientBrush x:Key="SyncMetroGradientButtonBackgroundBrush" EndPoint="0.96,0.539" StartPoint="0.069,0.523">
        <GradientStop Color="#FF000000" Offset="0" />
        <GradientStop Color="#FFD2C6C6" Offset="1" />
    </LinearGradientBrush>

    <!-- Linear,Radial and Reverse Button inner Border Brushes-->
    <LinearGradientBrush x:Key="SyncMetroLinearButtonBackground" EndPoint="0.944,0.462" StartPoint="0.075,0.462">
        <GradientStop Color="#FFB8B8B8" Offset="0.021" />
        <GradientStop Color="#FF454545" Offset="1" />
    </LinearGradientBrush>

    <RadialGradientBrush x:Key="SyncMetroRadialButtonBackground">
        <GradientStop Color="#FFFFFFFF" />
        <GradientStop Color="#FF454545" Offset="0.958" />
    </RadialGradientBrush>

    <LinearGradientBrush x:Key="SyncMetroBrushEditGradientRectBackgroundBrush" EndPoint="1,1" StartPoint="0,0">
        <LinearGradientBrush.RelativeTransform>
            <TransformGroup>
                <ScaleTransform CenterX="0.5" CenterY="0.5" />
                <SkewTransform CenterX="0.5" CenterY="0.5" />
                <RotateTransform CenterX="0.5" CenterY="0.5" />
                <TranslateTransform Y="0" />
            </TransformGroup>
        </LinearGradientBrush.RelativeTransform>
        <GradientStop Color="#FF000000" Offset="0" />
        <GradientStop Color="#FFFFFFFF" Offset="1" />
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="SyncLinearBrush" EndPoint="0.944,0.462" StartPoint="0.075,0.462">
        <GradientStop Color="#FFB8B8B8" Offset="0.021" />
        <GradientStop Color="#FF454545" Offset="1" />
    </LinearGradientBrush>

    <RadialGradientBrush x:Key="SyncRadialBrush">
        <GradientStop Color="#FFFFFFFF" />
        <GradientStop Color="#FF454545" Offset="0.958" />
    </RadialGradientBrush>

    <DrawingBrush x:Key="SyncReverseBrush">
        <DrawingBrush.Drawing>
            <DrawingGroup>
                <DrawingGroup.Children>
                    <GeometryDrawing Brush="#FF56ACE0" Geometry="F1 M 525.582,372.181C 525.582,382.142 517.492,390.23 507.544,390.23L 294.037,390.23C 284.076,390.23 276.007,382.142 276.007,372.181L 276.007,221.829C 276.007,211.854 284.076,203.784 294.037,203.784L 507.544,203.784C 517.492,203.784 525.582,211.854 525.582,221.829L 525.582,372.181 Z ">
                        <GeometryDrawing.Pen>
                            <Pen Thickness="0.666667" MiterLimit="2.75" Brush="#FF231F20" />
                        </GeometryDrawing.Pen>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="#FF231F20" Geometry="F1 M 346.828,184.195L 346.828,184.195C 359.001,183.472 371.46,184.042 383.884,185.9L 385.615,186.164L 393.101,187.347C 393.101,187.347 397.428,154.632 398.359,147.599C 404.453,154.59 468.36,228.006 470.573,230.552C 467.539,232.165 420.592,256.839 420.592,256.839C 420.592,256.839 387.632,274.188 380.941,277.715C 381.811,271.218 386.714,234.67 386.714,234.67L 380.614,232.966C 374.604,231.282 368.503,229.975 362.431,229.063C 352.72,227.616 342.911,227.178 333.256,227.749C 286.281,230.496 259.208,258.307 249.837,295.648C 248.794,292.671 247.486,289.665 246.826,286.73C 234.068,231.637 270.039,188.718 346.828,184.195 Z " />
                    <GeometryDrawing Geometry="F1 M 342.668,181.288L 342.668,181.288C 354.563,180.592 366.701,181.135 378.791,182.951L 380.503,183.215L 391.48,184.94C 391.48,184.94 394.889,159.084 396.175,149.578C 405.246,160.002 458.76,221.453 461.056,224.11C 456.395,226.552 413.656,249.069 413.656,249.069C 413.656,249.069 391.744,260.561 380.503,266.473C 381.721,257.396 385.74,227.408 385.74,227.408L 376.781,224.917C 370.583,223.164 364.253,221.808 358.014,220.876C 347.976,219.38 337.847,218.921 327.893,219.52C 286.934,221.919 258.06,242.864 245.17,278.55C 233.783,223.575 271.68,185.469 342.668,181.288 Z ">
                        <GeometryDrawing.Brush>
                            <LinearGradientBrush StartPoint="0.995353,0.66323" EndPoint="1.98894,0.66323">
                                <LinearGradientBrush.RelativeTransform>
                                    <TransformGroup>
                                        <SkewTransform CenterX="0.995353" CenterY="0.66323" AngleX="9.78536" AngleY="0" />
                                        <RotateTransform CenterX="0.995353" CenterY="0.66323" Angle="194.119" />
                                    </TransformGroup>
                                </LinearGradientBrush.RelativeTransform>
                                <LinearGradientBrush.GradientStops>
                                    <GradientStop Color="#FFFAC43E" Offset="0" />
                                    <GradientStop Color="#FFE27526" Offset="1" />
                                </LinearGradientBrush.GradientStops>
                            </LinearGradientBrush>
                        </GeometryDrawing.Brush>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="#FF231F20" Geometry="F1 M 473.222,418.814L 473.222,418.814C 461.925,420.714 450.246,421.43 438.462,420.999L 436.828,420.936L 429.718,420.582C 429.718,420.582 429.065,451.139 428.94,457.734C 422.518,451.891 355.321,390.704 352.998,388.59C 355.662,386.802 396.885,359.318 396.885,359.318C 396.885,359.318 425.823,340.05 431.687,336.119C 431.562,342.192 430.776,376.332 430.776,376.332L 436.647,377.306C 442.414,378.232 448.243,378.823 453.996,379.066C 463.212,379.428 472.402,378.816 481.354,377.335C 524.872,370.051 547.243,341.712 552.113,306.382C 553.399,309.018 554.923,311.654 555.841,314.298C 573.468,363.756 544.35,406.919 473.222,418.814 Z " />
                    <GeometryDrawing Geometry="F1 M 477.368,421.082L 477.368,421.082C 466.363,422.918 454.983,423.65 443.526,423.184L 441.877,423.121L 431.477,422.634C 431.477,422.634 430.984,446.8 430.776,455.689C 421.217,447.001 364.97,395.79 362.549,393.585C 366.632,390.85 404.175,365.815 404.175,365.815C 404.175,365.815 423.416,353.002 433.273,346.428C 433.085,354.922 432.424,382.927 432.424,382.927L 441.071,384.332C 447.005,385.32 453.063,385.926 458.997,386.142C 468.485,386.53 477.98,385.926 487.225,384.374C 525.151,378.038 549.915,355.826 558.248,321.643C 574.561,371.15 543.16,410.077 477.368,421.082 Z ">
                        <GeometryDrawing.Brush>
                            <LinearGradientBrush StartPoint="0.00581518,0.469229" EndPoint="1.00287,0.469229">
                                <LinearGradientBrush.RelativeTransform>
                                    <TransformGroup>
                                        <SkewTransform CenterX="0.00581518" CenterY="0.469229" AngleX="2.62024" AngleY="0" />
                                        <RotateTransform CenterX="0.00581518" CenterY="0.469229" Angle="3.27035" />
                                    </TransformGroup>
                                </LinearGradientBrush.RelativeTransform>
                                <LinearGradientBrush.GradientStops>
                                    <GradientStop Color="#FFFAC43E" Offset="0" />
                                    <GradientStop Color="#FFE27526" Offset="1" />
                                </LinearGradientBrush.GradientStops>
                            </LinearGradientBrush>
                        </GeometryDrawing.Brush>
                    </GeometryDrawing>
                </DrawingGroup.Children>
            </DrawingGroup>
        </DrawingBrush.Drawing>
    </DrawingBrush>

    <DrawingBrush x:Key="SyncTransparencyBrush" Viewport="0,0,10,10" ViewportUnits="Absolute" TileMode="Tile">
        <DrawingBrush.Drawing>
            <DrawingGroup>
                <GeometryDrawing Brush="#FFFFFFFF">
                    <GeometryDrawing.Geometry>
                        <RectangleGeometry Rect="0,0 100,100" />
                    </GeometryDrawing.Geometry>
                </GeometryDrawing>
                <GeometryDrawing Brush="#FFD3D3D3">
                    <GeometryDrawing.Geometry>
                        <GeometryGroup>
                            <RectangleGeometry Rect="0,0 50,50" />
                            <RectangleGeometry Rect="50,50 50,50" />
                        </GeometryGroup>
                    </GeometryDrawing.Geometry>
                </GeometryDrawing>
            </DrawingGroup>
        </DrawingBrush.Drawing>
    </DrawingBrush>

    <!--ToggleDropDownButtonStyle-->
    <Style x:Key="ToggleDropDownButtonStyle" TargetType="ToggleButton">
        <Setter Property="FrameworkElement.MinWidth" Value="0" />
        <Setter Property="FrameworkElement.MinHeight" Value="0" />
        <Setter Property="FrameworkElement.Width" Value="Auto" />
        <Setter Property="FrameworkElement.Height" Value="Auto" />
        <Setter Property="Panel.Background" Value="{DynamicResource BackgroundBrush}" />
        <Setter Property="UIElement.Focusable" Value="False" />
        <Setter Property="BorderBrush" Value="{StaticResource  BorderBrush}" />
        <Setter Property="Border.BorderThickness" Value="1" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleButton">
                    <Border  Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" SnapsToDevicePixels="True">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <ContentPresenter Grid.Column="0"  RecognizesAccessKey="True"  Content="{TemplateBinding ContentControl.Content}" ContentTemplate="{TemplateBinding ContentControl.ContentTemplate}" Margin="{TemplateBinding Control.Padding}"
                    HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"    VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}"       SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />

                            <Border Grid.Column="1" Width="20"
                    Background="{TemplateBinding Panel.Background}"
                    BorderThickness="{TemplateBinding Border.BorderThickness}"
                    BorderBrush="{TemplateBinding Border.BorderBrush}" x:Name="MainBorder" Margin="-1" SnapsToDevicePixels="True">
                                <Viewbox  Width="7" Height="9">
                                    <Path x:Name="Arrow" Data="{StaticResource geometry}" Fill="{StaticResource GlyphBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Viewbox>
                            </Border>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True" SourceName="MainBorder">
                            <Setter Property="Background" TargetName="MainBorder"  Value="{StaticResource  HoverBackgroundBrush}" />
                            <Setter Property="BorderBrush" TargetName="MainBorder"  Value="{StaticResource  HoverBorderBrush}" />
                            <Setter Property="Margin" Value="-1" TargetName="MainBorder" />
                            <Setter Property="Fill" TargetName="Arrow" Value="{StaticResource  HoverGlyphBrush}" />
                        </Trigger>
                        <Trigger Property="IsChecked" Value="True">

                            <Setter Property="Background" TargetName="MainBorder" Value="{StaticResource  ActiveBackgroundBrush}" />
                            <Setter Property="BorderBrush" TargetName="MainBorder"  Value="{StaticResource  ActiveBorderBrush}" />
                            <Setter Property="Margin" Value="-1" TargetName="MainBorder" />
                            <Setter Property="Fill" TargetName="Arrow" Value="{StaticResource  ActiveGlyphBrush}" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">

                            <Setter Property="Background" TargetName="MainBorder" Value="{StaticResource  ActiveBackgroundBrush}" />
                            <Setter Property="BorderBrush" TargetName="MainBorder"  Value="{StaticResource  ActiveBorderBrush}" />
                            <Setter Property="Margin" Value="-1" TargetName="MainBorder" />
                            <Setter Property="Fill" TargetName="Arrow" Value="{StaticResource  ActiveGlyphBrush}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Button Style for Linear,Gradient and Reverse -->
    <Style x:Key="ColorButtonFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="2" SnapsToDevicePixels="true" Stroke="{StaticResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--colorNameStyle-->
    <Style x:Key="colorNameStyle" TargetType="{x:Type StackPanel}">
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="TextBlock.Foreground" Value="#FFFFFFFF" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!--ColorItemTemplate-->
    <DataTemplate x:Key="ColorItemTemplate">
        <StackPanel Orientation="Horizontal" Name="colorName" Style="{StaticResource colorNameStyle}">
            <Border Width="20" Height="12" BorderThickness="1" BorderBrush="#FF000000"  Margin="1,1,3,1"
				Background="{Binding Path=Brush}">
            </Border>
            <TextBlock
					HorizontalAlignment="Center"
					VerticalAlignment="Center"
					Text="{Binding Path=Name}" />
        </StackPanel>
    </DataTemplate>

    <!--TextBlockStyle-->
    <Style x:Key="TextBlockStyle" TargetType="{x:Type TextBlock}">
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="Margin" Value="3,3,0,4" />
		<Setter Property="Foreground" Value="{StaticResource ContentForegroundBrush}"/>
        <Setter Property="Border.BorderBrush" Value="{StaticResource ContentBorderBrush}"/>
        <Setter Property="Background" Value="{StaticResource ContentBackgroundBrush}"/>
    </Style>

    <!--ToolTip_CustomStyle-->
    <Style x:Key="MetroToolTipCustomStyle" TargetType="{x:Type ToolTip}">
        <Setter Property="Background" Value="{StaticResource ContentBackgroundBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource ContentBorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Foreground" Value="{StaticResource ContentForegroundBrush}" />
    </Style>

    <ControlTemplate x:Key="TouchUIThumbTemplate" TargetType="{x:Type Thumb}">
        <Grid Margin="0,15,0,0">
            <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 563.502,268.191L 558.259,263.053L 552.99,257.891L 547.721,263.053L 542.478,268.191L 542.452,268.191L 542.452,277.747L 563.529,277.747L 563.529,268.191L 563.502,268.191 Z " HorizontalAlignment="Right" Height="19.857" VerticalAlignment="Top" Width="21.077" Stroke="{StaticResource GlyphBrush}" />
        </Grid>
    </ControlTemplate>

    <!--ThumbStyle-->
    <Style x:Key="ThumbStyle" TargetType="{x:Type Thumb}">
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Thumb}">
                    <Grid Margin="0">
                        <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="{StaticResource GlyphBrush}" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="6.017" VerticalAlignment="Bottom" Width="7" SnapsToDevicePixels="True" />
                        <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                            <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stroke="{StaticResource GlyphBrush}" Stretch="Fill" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stroke="{StaticResource GlyphBrush}" Stretch="Fill" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stroke="{StaticResource GlyphBrush}" Stretch="Fill" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stroke="{StaticResource GlyphBrush}" Stretch="Fill" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stroke="{StaticResource GlyphBrush}" Stretch="Fill" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stroke="{StaticResource GlyphBrush}" Stretch="Fill" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stroke="{StaticResource GlyphBrush}" Stretch="Fill" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " SnapsToDevicePixels="True" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                <Setter Property="Template" Value="{StaticResource TouchUIThumbTemplate}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!--ThumbStyle-->
    <Style x:Key="ColorThumbStyle" TargetType="{x:Type Thumb}">
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Thumb}">
                    <Grid Margin="0">
                        <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="{StaticResource GlyphBrush}" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Center" Height="6.017" VerticalAlignment="Bottom" Width="7" SnapsToDevicePixels="True" />
                        <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                            <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" />
                            <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Stroke="{StaticResource GlyphBrush}" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " SnapsToDevicePixels="True" />
                        </Canvas>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <ControlTemplate TargetType="{x:Type Thumb}" x:Key="TouchUIVerticalThumbTemplate">
        <Grid Margin="0">
            <Path Data="M0,2.3663047E-06 L4.7740021,2.3663047E-06 4.7740021,0.012002489 7.3420029,2.6330025 9.9220028,5.2660031 7.3420029,7.8990034 4.7740021,10.520003 4.7740021,10.530003 0,10.530003 z M34.925531,0 L39.700004,0 39.700004,10.53 34.925531,10.53 34.925531,10.518006 32.357246,7.8970041 29.778004,5.2659916 32.357246,2.6320192 34.925531,0.011993615 z" Fill="#FFFFFFFF" HorizontalAlignment="Center" Height="25.53" Stretch="Fill" VerticalAlignment="Top" Width="39.7" Stroke="#FF878787" />
        </Grid>
    </ControlTemplate>

    <Style x:Key="MetroThumbVerticalStyle" TargetType="{x:Type Thumb}">
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Thumb}">
                    <Grid>
                        <Grid Margin="0">
                            <Canvas x:Name="Background" HorizontalAlignment="Center" Height="9.105" VerticalAlignment="Top" Width="30.517" SnapsToDevicePixels="True">
                                <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="{StaticResource GlyphBrush}" Data="F1 M 671.009,336.501L 671.005,336.501L 671.005,334.501L 670.005,334.501L 669.505,334.501L 669.014,334.501L 668.68,334.501L 667.498,334.501L 667.498,335.501L 666.998,335.501L 666.998,336.501L 665.492,336.501L 665.492,337.501L 664.992,337.501L 664.992,338.501L 665.492,338.501L 665.492,339.501L 666.998,339.501L 666.998,340.501L 667.498,340.501L 667.498,341.501L 668.68,341.501L 669.014,341.501L 669.505,341.501L 670.005,341.501L 671.005,341.501L 671.005,339.501L 671.009,339.501L 671.009,336.501 Z " Height="7" Width="6.017" RenderTransformOrigin="0.5,0.5" Canvas.Left="1" Canvas.Top="1">
                                    <Path.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform />
                                            <SkewTransform />
                                            <RotateTransform Angle="180" />
                                            <TranslateTransform />
                                        </TransformGroup>
                                    </Path.RenderTransform>
                                </Path>
                                <Viewbox Height="9" Width="8.017" RenderTransformOrigin="0.5,0.5">
                                    <Viewbox.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform />
                                            <SkewTransform />
                                            <RotateTransform Angle="180" />
                                            <TranslateTransform />
                                        </TransformGroup>
                                    </Viewbox.RenderTransform>
                                    <Canvas Width="8.017" Height="9">
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="7" Canvas.Left="7.0166" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="0" Canvas.Top="4" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="5" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="6" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3.00586" Canvas.Top="7" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="3.00781" Height="1" Canvas.Left="4.00879" Canvas.Top="8" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="4.0166" Height="2" Canvas.Left="3" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 4.00879,0L 4.00879,1L 3,1L 3,2L 4.01068,2L 4.01068,1L 7.0166,1L 7.0166,0L 4.00879,0 Z " />
                                        <Viewbox Height="9" Canvas.Left="-56.133" Canvas.Top="46.834" Width="8.017" RenderTransformOrigin="0.5,0.5">
                                            <Viewbox.RenderTransform>
                                                <TransformGroup>
                                                    <ScaleTransform />
                                                    <SkewTransform />
                                                    <RotateTransform Angle="-90" />
                                                    <TranslateTransform />
                                                </TransformGroup>
                                            </Viewbox.RenderTransform>
                                        </Viewbox>
                                    </Canvas>
                                </Viewbox>
                                <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="{StaticResource GlyphBrush}" Data="F1 M 671.009,336.501L 671.005,336.501L 671.005,334.501L 670.005,334.501L 669.505,334.501L 669.014,334.501L 668.68,334.501L 667.498,334.501L 667.498,335.501L 666.998,335.501L 666.998,336.501L 665.492,336.501L 665.492,337.501L 664.992,337.501L 664.992,338.501L 665.492,338.501L 665.492,339.501L 666.998,339.501L 666.998,340.501L 667.498,340.501L 667.498,341.501L 668.68,341.501L 669.014,341.501L 669.505,341.501L 670.005,341.501L 671.005,341.501L 671.005,339.501L 671.009,339.501L 671.009,336.501 Z " Height="7" Width="6.017" Canvas.Left="23.5" Canvas.Top="1.105" />
                                <Viewbox Height="9" Width="8.017" Canvas.Left="22.5" Canvas.Top="0.105">
                                    <Canvas Width="8.0166" Height="9">
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="7" Canvas.Left="7.0166" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="0" Canvas.Top="4" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="5" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="6" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3.00586" Canvas.Top="7" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="3.00781" Height="1" Canvas.Left="4.00879" Canvas.Top="8" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="4.0166" Height="2" Canvas.Left="3" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 4.00879,0L 4.00879,1L 3,1L 3,2L 4.01068,2L 4.01068,1L 7.0166,1L 7.0166,0L 4.00879,0 Z " />
                                    </Canvas>
                                </Viewbox>
                            </Canvas>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                <Setter Property="Template" Value="{StaticResource TouchUIVerticalThumbTemplate}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="MetroSliderButtonStyle"  TargetType="{x:Type RepeatButton}">
        <Setter Property="SnapsToDevicePixels" Value="true" />
        <Setter Property="OverridesDefaultStyle" Value="true" />
        <Setter Property="IsTabStop" Value="false" />
        <Setter Property="Focusable" Value="false" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RepeatButton}">
                    <Border Background="Transparent" BorderBrush="{StaticResource BorderBrush}" SnapsToDevicePixels="True" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--MetroSliderCustomStyle-->
    <Style x:Key="MetroSliderCustomStyle" TargetType="{x:Type Slider}">
        <Setter Property="Minimum" Value="0" />
        <Setter Property="Maximum" Value="1" />
        <Setter Property="IsMoveToPointEnabled" Value="true" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Grid ClipToBounds="false">
                        <Border Height="6" CornerRadius="0" Background="{StaticResource SyncTransparencyBrush}" SnapsToDevicePixels="True" x:Name="OuterBorder" />
                        <Border Height="6"  CornerRadius="0" Background="{TemplateBinding Background}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" SnapsToDevicePixels="True" x:Name="InnerBorder" />
                        <Track Name="PART_Track">
                            <Track.Thumb>
                                <Thumb Style="{StaticResource ThumbStyle}" />
                            </Track.Thumb>
                            <Track.IncreaseRepeatButton>
                                <RepeatButton Style="{StaticResource MetroSliderButtonStyle}" />
                            </Track.IncreaseRepeatButton>
                            <Track.DecreaseRepeatButton>
                                <RepeatButton Style="{StaticResource MetroSliderButtonStyle}" />
                            </Track.DecreaseRepeatButton>
                        </Track>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                            <Setter Property="Height" TargetName="OuterBorder" Value="10" />
                            <Setter Property="Height" TargetName="InnerBorder" Value="10" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="MetroSliderCustomStyleVertical" TargetType="{x:Type Slider}">
        <Setter Property="Minimum" Value="0" />
        <Setter Property="IsMoveToPointEnabled" Value="true" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Grid ClipToBounds="false">
                        <Border Margin="5,4,5,4" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{TemplateBinding Background}" x:Name="OuterBorder"
                         BorderThickness="1">
                      
                        </Border>
                        <Track Name="PART_Track">
                            <Track.Thumb>
                                <Thumb Style="{StaticResource MetroThumbVerticalStyle}" />
                            </Track.Thumb>
                            <Track.IncreaseRepeatButton>
                                <RepeatButton Style="{StaticResource MetroSliderButtonStyle}" />
                            </Track.IncreaseRepeatButton>
                            <Track.DecreaseRepeatButton>
                                <RepeatButton Style="{StaticResource MetroSliderButtonStyle}" />
                            </Track.DecreaseRepeatButton>
                        </Track>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                            <Setter TargetName="OuterBorder" Property="Margin" Value="0" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--TogglePopupButtonTemplate-->
    <ControlTemplate x:Key="TogglePopupButtonTemplate" TargetType="ToggleButton">
        <Border Name="Bd" Background="{DynamicResource BackgroundBrush}"  BorderThickness="{TemplateBinding BorderThickness}"   BorderBrush="{StaticResource BorderBrush}" SnapsToDevicePixels="True">
            <Grid>
                <ContentPresenter RecognizesAccessKey="True"  Content="{TemplateBinding Content}"  ContentTemplate="{TemplateBinding ContentTemplate}"
                    Margin="{TemplateBinding Control.Padding}"
                    HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
                    VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}"
                    SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />

                <Path Name="Arrow" StrokeThickness="2"  Stroke="{StaticResource GlyphBrush}"
                                  Data="M 1,1.5 L 4.5,5 L 8,1.5"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center" SnapsToDevicePixels="True" />
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger  Property="IsMouseOver" Value="True">
                <Setter TargetName="Bd" Property="Background" Value="{StaticResource HoverBackgroundBrush}" />
                <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource HoverBorderBrush}" />
                <Setter TargetName="Arrow" Property="Stroke" Value="{StaticResource HoverGlyphBrush}" />
            </Trigger>
			<Trigger Property="IsChecked" Value="True">
                <Setter TargetName="Bd" Property="Background" Value="{StaticResource ActiveBackgroundBrush}" />
                <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource ActiveBorderBrush}" />
                <Setter TargetName="Arrow" Property="Stroke" Value="{StaticResource ActiveGlyphBrush}" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="Bd" Property="Background" Value="{StaticResource ActiveBackgroundBrush}" />
                <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource ActiveBorderBrush}" />
                <Setter TargetName="Arrow" Property="Stroke" Value="{StaticResource ActiveGlyphBrush}" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <Style x:Key="MetroTextBoxStyle" TargetType="{x:Type TextBox}">
        <Setter Property="Foreground" Value="{StaticResource ContentForegroundBrush}" />
        <Setter Property="Background" Value="{StaticResource ContentBackgroundBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource ContentBorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="1" />
        <Setter Property="AllowDrop" Value="true" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="FontFamily" Value="{StaticResource ColorPickerFontFamily}" />
        <Setter Property="Stylus.IsFlicksEnabled" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                        <ScrollViewer x:Name="PART_ContentHost" Margin="1,2,2,2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="shared:SkinStorage.EnableTouch" Value="False" />
                                <Condition Property="IsMouseOver" Value="True" />
                            </MultiTrigger.Conditions>
                            <Setter Property="BorderBrush" Value="{StaticResource HoverBorderBrush}" />
                        </MultiTrigger>
                        <Trigger Property="IsReadOnly" Value="True">
                            <Setter Property="Opacity" Value="0.5" />
                        </Trigger>
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter Property="BorderBrush" Value="{StaticResource ContentBorderBrush}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.5" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--ColorEditStyle-->
    <Style x:Key="MetroColorEditStyle" TargetType="{x:Type shared:ColorEdit}">
        <Setter Property="Background"  Value="{StaticResource ContentBackgroundBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource ContentBorderBrush}" />
        <Setter Property="Foreground" Value="{StaticResource ContentForegroundBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Style.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicRGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Name="ColorEditBorder" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                <!--<Border.Effect>
                                    <DropShadowEffect Opacity="0.31" />
                                </Border.Effect>-->
                                <Grid Name="Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="18" />
                                        <ColumnDefinition Width="20*" />
                                        <ColumnDefinition Width="24" />
                                        <ColumnDefinition Width="76" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Column="0" Grid.Row="0" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					R:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="1" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					G:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="2" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					B:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Name="AlphaText" Grid.Row="3" Style="{StaticResource TextBlockStyle}" Visibility="Visible" HorizontalAlignment="Left" FontSize="9">
					A:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="3" Name="AlphaSlider"   Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <TextBlock  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="3,3" FontSize="7" />
                                    <TextBlock Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="3,3" FontSize="7" />
                                    <TextBlock Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="3,3" FontSize="7" />
                                    <TextBlock Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="3,3" FontSize="7" />
                                    <Rectangle Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Fill="{StaticResource SyncTransparencyBrush}" SnapsToDevicePixels="True" />
                                    <Rectangle Name="ColorRect"  Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    <StackPanel Grid.Column="3" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5,1,5,1">
                                        <Button Width="20" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorWhite">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border BorderThickness="1" BorderBrush="#FF000000" CornerRadius="0" Background="#FFFFFFFF" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="20" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorBlack">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border CornerRadius="0" Background="#FF000000" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <shared:BorderEyeDrop CornerRadius="0"  BorderThickness="1" BorderBrush="#FF808080" Width="20" Name="EyeDropBorder">
                                            <Image Width="15" Height="15" Name="PART_Image" VerticalAlignment="Center" HorizontalAlignment="Center"   Source="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropGray.png" />
                                        </shared:BorderEyeDrop>
                                    </StackPanel>
                                    <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Name="PART_ColorStringEditor" Width="68" MaxLength="9" Grid.Row="3" Height="18" Margin="5,1,5,1" TextBlock.FontSize="9" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" VerticalAlignment="Center" />
                                    <shared:ColorBar Grid.Row="4" Grid.ColumnSpan="3" x:Name="PickerColorBar" Height="20" HorizontalAlignment="Stretch" />

                                    <StackPanel Grid.Column="4" Grid.Row="4" HorizontalAlignment="Center" Name="EnableSwitch"  Height="20" Orientation="Horizontal">
                                        <Button Width="25" Margin="0,2,3,1" Name="Solid">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="30" Margin="0,2,2,1" Name="Gradient">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                    <Border Grid.Row="5"  BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent" Grid.ColumnSpan="4" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="27,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="0,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Visibility="Visible" Grid.ColumnSpan="4" Grid.Column="0" Name="GridPopup">
                                                    <ToggleButton Name="PopButton" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0" Height="15" HorizontalAlignment="Stretch">
                                                    </ToggleButton>
                                                    <Popup Name="GradPopup" PopupAnimation="Slide" MinWidth="230" AllowsTransparency="True" StaysOpen="True" Width="230"  IsOpen="{Binding ElementName=PopButton, Path=IsChecked}">

                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>
                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1" ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="25,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="20,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy"  Margin="1" ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <Trigger SourceName="EyeDropBorder" Property="IsMouseCaptured" Value="True">
                                    <Setter TargetName="EyeDropBorder" Property="Color" Value="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                    <Setter TargetName="PART_Image" Property="Source" Value="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropColor.png" />
                                </Trigger>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaText" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaSlider" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaValue" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PickerColorBar" Property="Width" Value="{Binding Path=ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" />
                                    <Setter Property="Grid.ColumnSpan" TargetName="PickerColorBar" Value="4" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridBorder" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter Property="Margin" TargetName="Grid" Value="2" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-7">
                                <Canvas x:Name="Poly">
                                    <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="7.017" VerticalAlignment="Bottom" Width="9" />
                                    <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                        <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                    </Canvas>
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicRGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Name="ColorEditBorder"
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                <Grid x:Name="Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="18" />
                                        <ColumnDefinition Width="90" />
                                        <ColumnDefinition Width="24" />
                                        <ColumnDefinition Width="96" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Column="0" Grid.Row="0" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					R:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="1" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					G:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="2" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					B:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Name="AlphaText" Grid.Row="3" Style="{StaticResource TextBlockStyle}" Visibility="Visible" HorizontalAlignment="Left" FontSize="9">
					A:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="3" Name="AlphaSlider"   Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <TextBlock  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="3,3" FontSize="9" />
                                    <TextBlock Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="3,3" FontSize="9" />
                                    <TextBlock Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="3,3" FontSize="9" />
                                    <TextBlock Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="3,3" FontSize="9" />
                                    <Rectangle Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Fill="{StaticResource SyncTransparencyBrush}" />
                                    <Rectangle Name="ColorRect"  Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    <StackPanel Grid.Column="3" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5,1,5,1">
                                        <Button Width="20" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorWhite">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border BorderThickness="1" BorderBrush="#FF000000" CornerRadius="0" Background="#FFFFFFFF" SnapsToDevicePixels="True" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="20" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorBlack">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border CornerRadius="0" Background="#FF000000" SnapsToDevicePixels="True" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <shared:BorderEyeDrop CornerRadius="0" BorderThickness="1" BorderBrush="#FF808080" Width="20" Name="EyeDropBorder">
                                            <Image Width="15" Height="15" Name="PART_Image" VerticalAlignment="Center" HorizontalAlignment="Center" Source="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropGray.png" />
                                        </shared:BorderEyeDrop>
                                    </StackPanel>
                                    <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Name="PART_ColorStringEditor" Grid.Row="3" Height="18" Width="68" MaxLength="9" Margin="5,1,5,1" TextBlock.FontSize="9" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <shared:ColorBar Grid.Row="4" Grid.ColumnSpan="3" Name="PickerColorBar" Height="20" HorizontalAlignment="Stretch" />

                                    <StackPanel Grid.Column="4" Grid.Row="4" HorizontalAlignment="Center" Name="EnableSwitch"  Height="20" Orientation="Horizontal">
                                        <Button Width="25" Margin="2,2,3,1" Name="Solid">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="25" Margin="2,2,2,1" Name="Gradient">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                    <Border Grid.Row="5" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent" Grid.ColumnSpan="4" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,2,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="25,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">
                                                    <StackPanel>
                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="230" Grid.Row="2" Visibility="Visible" Width="230" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" SnapsToDevicePixels="True">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>

                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <Trigger SourceName="EyeDropBorder" Property="IsMouseCaptured" Value="True">
                                    <Setter TargetName="EyeDropBorder" Property="Color" Value="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                    <Setter TargetName="PART_Image" Property="Source" Value="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropColor.png" />
                                </Trigger>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaText" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaSlider" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaValue" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PickerColorBar" Property="Width" Value="{Binding Path=ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" />
                                    <Setter Property="Grid.ColumnSpan" TargetName="PickerColorBar" Value="4" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridBorder" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter Property="Margin" TargetName="Grid" Value="2" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-7">
                                <Canvas>
                                    <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="7.017" VerticalAlignment="Bottom" Width="9" />
                                    <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                        <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                    </Canvas>
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicHSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="0.005*" />
                                        <ColumnDefinition Width="0.995*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="125" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" Margin="3,3,3,6">
                                    </Border>
                                    <Canvas Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" ClipToBounds="True" Grid.ColumnSpan="2">
                                        <Ellipse
            Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                        </Ellipse>
                                        <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                            <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                <Border.Background>
                                                    <SolidColorBrush>
                                                        <SolidColorBrush.Color>
                                                            <Color A="200"  R="255" G="255" B="255" />
                                                        </SolidColorBrush.Color>
                                                    </SolidColorBrush>
                                                </Border.Background>
                                                <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                </TextBox>
                                            </Border>
                                        </Popup>
                                    </Canvas>
                                    <Slider Grid.Column="2"
                Grid.RowSpan="2"
                Margin="5,0,5,6"
                Orientation="Vertical"
                Grid.Row="0"
                Background="{shared:HSVBackgroundBrush VerticalSlider}"
                Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                Style="{StaticResource MetroSliderCustomStyleVertical}"
                Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />

                                    <StackPanel Grid.Column="3" Grid.Row="1" Margin="5,1,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor"
                 Height="20" FontSize="9.3333" Width="68" MaxLength="9"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="5,0,0,2"  Height="20" Orientation="Horizontal">

                                            <Button Width="20" Margin="2,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>

                                    <Grid Grid.Column="3" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="16" />
                                            <ColumnDefinition Width="32" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="22" />
                                            <RowDefinition Height="22" />
                                            <RowDefinition Height="22" />
                                            <!--<RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />-->
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="1"  Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" FontSize="9.3333" Height="13">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" FontSize="9.3333" Height="13">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="3" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" FontSize="9.3333" Height="13">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="1" Margin="1" Name="Hval" IsEnabled="False" Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" Height="18" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="2" Margin="1" Name="Sval" IsEnabled="False" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" Height="18" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="3" Margin="1" Name="Vval" IsEnabled="False"  Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" Height="18" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center" VerticalContentAlignment="Center" />
                                        <TextBlock Grid.Column="2" Name="AlphaLabel" Grid.Row="0" VerticalAlignment="Bottom" Height="15" FontSize="9.3333" HorizontalAlignment="Center">
					  A:
					  <TextBlock.ToolTip>
					    <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
						  <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
					    </ToolTip>
					  </TextBlock.ToolTip>
				    </TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9.3333">
						R:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9.3333">
						G:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9.3333">
						B:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="0" Name="AlphaVal"  Text="{Binding A, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Bottom" Height="18" FontSize="9" HorizontalAlignment="Center" Margin="1" Width="30" IsEnabled="False" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="1" Name="Rval" Text="{Binding R, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" FontSize="9" HorizontalAlignment="Center" Margin="1" Height="18" Width="30" VerticalContentAlignment="Center" IsEnabled="False" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="2" Name="Gval" Text="{Binding G, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" FontSize="9" HorizontalAlignment="Center" Margin="1" Height="18" Width="30" VerticalContentAlignment="Center" IsEnabled="False" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="3" Name="Bval" Text="{Binding B, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" FontSize="9" HorizontalAlignment="Center" Margin="1" Height="18" Width="30" VerticalContentAlignment="Center" IsEnabled="False" />
                                        <Rectangle Grid.Column="0" Grid.Row="0"  Grid.ColumnSpan="2" Margin="0,2,0,3"  Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="4" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="5,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,5,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">

                                                    <ToggleButton Name="PopButton" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="-1,0,-1,0" Height="15" ClickMode="Press" HorizontalAlignment="Stretch">
                                                    </ToggleButton>

                                                    <Popup Name="GradPopup" PopupAnimation="Slide" AllowsTransparency="True" MinWidth="230" StaysOpen="True" Width="230"
					   IsOpen="{Binding ElementName= PopButton, Path=IsChecked}">
                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="80" />
                                                                            <ColumnDefinition Width="80" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">

                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-7">
                                <Canvas>
                                    <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="7.017" VerticalAlignment="Bottom" Width="9" />
                                    <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                        <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                    </Canvas>
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicHSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True"
            Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="7*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="125" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" Margin="3,3,3,6">
                                    </Border>
                                    <Canvas Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" ClipToBounds="True" Margin="3">
                                        <Ellipse
            Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                        </Ellipse>
                                        <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                            <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                <Border.Background>
                                                    <SolidColorBrush>
                                                        <SolidColorBrush.Color>
                                                            <Color A="200"  R="255" G="255" B="255" />
                                                        </SolidColorBrush.Color>
                                                    </SolidColorBrush>
                                                </Border.Background>
                                                <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                </TextBox>
                                            </Border>
                                        </Popup>
                                    </Canvas>
                                    <Slider Grid.Column="1" Grid.RowSpan="2" Margin="3,0,0,0" Orientation="Vertical" Grid.Row="0" Background="{shared:HSVBackgroundBrush VerticalSlider}"
                                             Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource MetroSliderCustomStyleVertical}"
                                             Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="1" Margin="5,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor"
                 Height="20" FontSize="9.33333" Width="68" MaxLength="9"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="5,0,0,2"  Height="20" Orientation="Horizontal">

                                            <Button Width="20" Margin="2,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="16" />
                                            <ColumnDefinition Width="32" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="22" />
                                            <RowDefinition Height="22" />
                                            <RowDefinition Height="22" />
                                            <!--<RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />-->
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="1"  Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" FontSize="9" HorizontalAlignment="Center">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" FontSize="9" HorizontalAlignment="Center">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="3" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" FontSize="9" HorizontalAlignment="Center">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="1" Margin="1" IsEnabled="False" Name="Hval"  Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" FontSize="9" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="2" Margin="1" IsEnabled="False" Name="Sval" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" FontSize="9" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="3" Margin="1" IsEnabled="False" Name="Vval" Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" FontSize="9" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBlock Grid.Column="2" Name="AlphaLabel" Grid.Row="0" VerticalAlignment="Bottom" Height="21" HorizontalAlignment="Center" FontSize="9">
					  A:
					  <TextBlock.ToolTip>
					    <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
						  <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
					    </ToolTip>
					  </TextBlock.ToolTip>
				    </TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="1" HorizontalAlignment="Center" FontSize="9">
						R:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="2" HorizontalAlignment="Center" FontSize="9">
						G:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="3" HorizontalAlignment="Center" FontSize="9">
						B:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="0" Margin="1" Name="AlphaVal" IsEnabled="False"  Text="{Binding A, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Bottom" Height="18" FontSize="9.3333" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="1" Margin="1" Name="Rval" IsEnabled="False" Text="{Binding R, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" FontSize="9.3333" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="2" Margin="1" Name="Gval" IsEnabled="False"  Text="{Binding G, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" FontSize="9.3333" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="3" Margin="1" Name="Bval" IsEnabled="False" Text="{Binding B, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" FontSize="9.3333" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <Rectangle Grid.Column="0" Grid.Row="0"  Grid.ColumnSpan="2" Margin="0,0,0,3"  Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="5,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" HorizontalAlignment="Center" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" HorizontalAlignment="Center" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"   VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Visibility="Visible" Grid.ColumnSpan="2" Name="GridPopup">
                                                    <StackPanel>
                                                        <!--<ToggleButton Name="ButtonExt" Visibility="Visible" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Height="12" Margin="0,2,0,0" HorizontalAlignment="Stretch">
                                                        </ToggleButton>-->

                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="210" Grid.Row="2" Visibility="Visible" Width="{TemplateBinding Width}" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">

                                                            <!--<Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">-->
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="80" />
                                                                            <ColumnDefinition Width="80" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">

                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-7">
                                <Canvas>
                                    <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="7.017" VerticalAlignment="Bottom" Width="9" />
                                    <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                        <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                    </Canvas>
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="HSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0"
                                    BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="160" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="160" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="7,3,3,3" BorderBrush="{StaticResource ContentBorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>

                                            <Border Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}"  Grid.ColumnSpan="2" Grid.Column="0" Grid.Row="0" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0" SnapsToDevicePixels="True">
                                            </Border>
                                            <Grid Grid.Row="1" Grid.Column="0" Margin="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>

                                            <Grid Grid.Column="1" Grid.Row="1" Margin="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>

                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Ellipse Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                     Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                     Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                                </Ellipse>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
                                                   HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                                                             Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>
                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="7,0,0,0" Orientation="Vertical" Grid.Row="0" Background="{shared:HSVBackgroundBrush VerticalSlider}"
                                            Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                                            Style="{StaticResource MetroSliderCustomStyleVertical}"
                                            Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />

                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor" Height="20" FontSize="9.3333" Margin="2,2,0,0" Width="68" MaxLength="9" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="17" Orientation="Horizontal">
                                            <Button Width="20" Margin="0,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"   BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroLinearButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"   BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="45" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="0"  Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" Margin="2,4,0,4" FontSize="9.3333" HorizontalAlignment="Left">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="1" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" Margin="2,4,0,4" FontSize="9.3333" HorizontalAlignment="Left">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" Margin="2,4,0,4" FontSize="9.3333" HorizontalAlignment="Left">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <Slider Grid.Column="1" Grid.Row="0" x:Name="SliderH" Background="{TemplateBinding Background}" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=H, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Minimum="0" Maximum="360" Margin="5,0,0,0" />
                                        <Slider Grid.Column="1" Grid.Row="1" x:Name="SliderS" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=S, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Margin="5,0,0,0" />
                                        <Slider Grid.Column="1" Grid.Row="2" x:Name="SliderV" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=V, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Margin="5,0,0,0" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="0" Margin="2" Name="Hval" Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" BorderBrush="{StaticResource ContentBorderBrush}" IsEnabled="False" Width="35" Height="20" FontSize="9.33333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Margin="2" Name="Sval" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" BorderBrush="{StaticResource ContentBorderBrush}" IsEnabled="False" Width="35" Height="20" FontSize="9.33333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Margin="2" Name="Vval"  Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" BorderBrush="{StaticResource ContentBorderBrush}" IsEnabled="False" Width="35" Height="20" FontSize="9.33333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroRadialButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,5,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">

                                                    <ToggleButton Name="PopButton" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Background="{DynamicResource BackgroundBrush}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0,2,0,0" ClickMode="Press" Height="14" HorizontalAlignment="Stretch">
                                                    </ToggleButton>

                                                    <Popup Name="GradPopup" PopupAnimation="Slide" AllowsTransparency="True" MinWidth="230" StaysOpen="True" Width="230"
					   IsOpen="{Binding ElementName= PopButton, Path=IsChecked}">
                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>

                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">

                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <!--<Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>-->
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-5">
                                <Canvas>
                                    <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="7.017" VerticalAlignment="Bottom" Width="9" />
                                    <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                        <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                    </Canvas>
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="HSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                </MultiTrigger.Conditions>

                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0"
                                    BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="7*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="110" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" BorderBrush="{StaticResource ContentBorderBrush}" Margin="7,3,3,3" BorderThickness="1" SnapsToDevicePixels="True">

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="1" Grid.Column="0" Margin="0">
                                                <Border CornerRadius="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Grid Grid.Column="1" Grid.Row="1" Margin="0">
                                                <Border CornerRadius="0">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Border Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0" Grid.ColumnSpan="2" Grid.Column="0" Grid.Row="0">
                                            </Border>
                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Ellipse Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                     Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                     Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                                </Ellipse>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
                                                   HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="0" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                                                             Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>
                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="7,0,0,0" Orientation="Vertical" Grid.Row="0" Background="{shared:HSVBackgroundBrush VerticalSlider}"
                                            Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                                            Style="{StaticResource MetroSliderCustomStyleVertical}"
                                            Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor" Height="20" Width="68" MaxLength="9" FontSize="9.3333" Margin="2,2,0,0" VerticalAlignment="Top" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="20" Orientation="Horizontal" VerticalAlignment="Top">
                                            <Button Width="20" Margin="0,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>

                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="45" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="0" Margin="2,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="1" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" FontSize="9.3333" HorizontalAlignment="Left" Margin="2,4,0,4">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" FontSize="9.3333" HorizontalAlignment="Left" Margin="2,4,0,4">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>

                                        <Slider Grid.Column="1" Grid.Row="0" x:Name="SliderH" Background="{TemplateBinding Background}" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=H, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Minimum="0" Maximum="360" />
                                        <Slider Grid.Column="1" Grid.Row="1" x:Name="SliderS" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=S, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                        <Slider Grid.Column="1" Grid.Row="2" x:Name="SliderV" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=V, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="0" Margin="2" Name="Hval" Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Margin="2" Name="Sval" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Margin="2" Name="Vval"  Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" BorderBrush="{StaticResource ContentBorderBrush}" />
                                    </Grid>

                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <Grid Grid.Column="0"  Grid.Row="0" Margin="3,0,0,0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroRadialButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>

                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">
                                                    <StackPanel>
                                                        <!--Background="{shared:SkinObject BrushBackground}"-->
                                                        <!--<ToggleButton Visibility="Visible" Name="ButtonExt" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0,2,0,0" Height="14" HorizontalAlignment="Stretch">
                                                        </ToggleButton>-->
                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="230" Grid.Row="2" Visibility="Visible" Width="230" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty"  Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>

                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                    <!--</Popup>-->
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <!--<Trigger Property="IsAlphaVisible" Value="False">
                                        <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                        <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                    </Trigger>-->
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-5">
                                <Canvas>
                                    <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="7.017" VerticalAlignment="Bottom" Width="9" />
                                    <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                        <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                    </Canvas>
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>

                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="RGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True"  Background="{TemplateBinding Background}" Margin="0,5,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="7*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="110" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="7,3,3,3" BorderBrush="{StaticResource ContentBorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="1" Grid.Column="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,-1,0.5"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Grid Grid.Row="1" Grid.Column="1">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Border Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0">
                                            </Border>
                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Ellipse
            Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                                </Ellipse>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>

                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="7,0,0,0" Orientation="Vertical" Grid.Row="0"
                Background="{shared:HSVBackgroundBrush VerticalSlider}"
                Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                Style="{StaticResource MetroSliderCustomStyleVertical}"
                Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor"
                 Height="20" FontSize="9.3333" Margin="2,0,0,0" Width="68" MaxLength="9"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="17" Orientation="Horizontal" VerticalAlignment="Top">

                                            <Button Width="17" Margin="2,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="17" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="15" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="45" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <!--<RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />-->
                                        </Grid.RowDefinitions>
                                        <TextBlock Grid.Column="0" Grid.Row="0"  Foreground="{TemplateBinding Foreground}" Text="R" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="1" Text="G" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="2" Text="B" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="3" Text="A" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="3" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="2" IsEnabled="True" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="2" IsEnabled="True" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="2" IsEnabled="True" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="2" IsEnabled="True" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="16" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">

                                                    <ToggleButton Name="PopButton" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0,2,0,0" ClickMode="Press" Height="14" HorizontalAlignment="Stretch">
                                                    </ToggleButton>

                                                    <Popup Name="GradPopup" PopupAnimation="Slide" AllowsTransparency="True" MinWidth="230" StaysOpen="False" Width="230"
					   IsOpen="{Binding ElementName= PopButton, Path=IsChecked}">
                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-5">
                                <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="6.017" VerticalAlignment="Bottom" Width="9" />
                                <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                    <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="RGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0" BorderBrush="{TemplateBinding BorderBrush}" SnapsToDevicePixels="True" BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="90" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="120" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="7,3,3,3" BorderBrush="{StaticResource ContentBorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="1" Grid.Column="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,-1,0.5" SnapsToDevicePixels="True"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Grid Grid.Row="1" Grid.Column="1">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Border Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0">
                                            </Border>
                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Ellipse
            Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                                </Ellipse>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>

                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="5,0,0,0" Orientation="Vertical" Grid.Row="0"
                Background="{shared:HSVBackgroundBrush VerticalSlider}"
                Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                Style="{StaticResource MetroSliderCustomStyleVertical}"
                Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor"
                 Height="20" FontSize="9.333" Width="68" MaxLength="9"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}" VerticalAlignment="Center" HorizontalAlignment="Center" VerticalContentAlignment="Center">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="17" Orientation="Horizontal">

                                            <Button Width="20" Margin="0,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="15" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="45" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <!--<RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />-->
                                        </Grid.RowDefinitions>
                                        <TextBlock Grid.Column="0" Grid.Row="0"  Foreground="{TemplateBinding Foreground}" Text="R" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="1" Text="G" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="2" Text="B" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="3" Text="A" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="3" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="16" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">
                                                    <StackPanel>
                                                        <!--Background="{shared:SkinObject BrushBackground}"-->
                                                        <!--<ToggleButton Visibility="Visible" Name="ButtonExt" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" HorizontalAlignment="Stretch" Height="14" Margin="0,2,0,0">
                                                        </ToggleButton>-->
                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="230" Grid.Row="2" Visibility="Visible" Width="230" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                    <!--</Popup>-->
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <!--<Trigger Property="IsAlphaVisible" Value="False">
                                        <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                        <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                    </Trigger>-->
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-5">
                                <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="6.017" VerticalAlignment="Bottom" Width="9" />
                                <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                    <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <!-- MultiTouch UI Styles -->
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicRGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                    <Condition Property="shared:SkinStorage.EnableTouch" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Name="ColorEditBorder" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                <!--<Border.Effect>
                                    <DropShadowEffect Opacity="0.31" />
                                </Border.Effect>-->
                                <Grid Name="Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="18" />
                                        <ColumnDefinition Width="20*" />
                                        <ColumnDefinition Width="24" />
                                        <ColumnDefinition Width="76" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Column="0" Grid.Row="0" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					R:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="1" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					G:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="2" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					B:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Name="AlphaText" Grid.Row="3" Style="{StaticResource TextBlockStyle}" Visibility="Visible" HorizontalAlignment="Left" FontSize="9">
					A:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="3" Name="AlphaSlider"   Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <TextBlock  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="3,3" FontSize="7" />
                                    <TextBlock Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="3,3" FontSize="7" />
                                    <TextBlock Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="3,3" FontSize="7" />
                                    <TextBlock Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="3,3" FontSize="7" />
                                    <Rectangle Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Fill="{StaticResource SyncTransparencyBrush}" SnapsToDevicePixels="True" />
                                    <Rectangle Name="ColorRect"  Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    <StackPanel Grid.Column="3" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5,1,5,1">
                                        <Button Width="40" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorWhite">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border BorderThickness="1" BorderBrush="#FF000000" CornerRadius="0" Background="#FFFFFFFF" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="40" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorBlack">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border CornerRadius="0" Background="#FF000000" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <shared:BorderEyeDrop CornerRadius="0"  BorderThickness="1" BorderBrush="#FF808080" Width="40" Name="EyeDropBorder">
                                            <Image Width="15" Height="15" Name="PART_Image" VerticalAlignment="Center" HorizontalAlignment="Center"   Source="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropGray.png" />
                                        </shared:BorderEyeDrop>
                                    </StackPanel>
                                    <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Name="PART_ColorStringEditor" Grid.Row="3" Height="18" Width="68" MaxLength="9" Margin="5,1,5,1" TextBlock.FontSize="13" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" VerticalAlignment="Center" />
                                    <shared:ColorBar Grid.Row="4" Grid.ColumnSpan="3" x:Name="PickerColorBar" Height="25" HorizontalAlignment="Stretch" />

                                    <StackPanel Grid.Column="4" Grid.Row="4" HorizontalAlignment="Center" Name="EnableSwitch"  Height="30" Orientation="Horizontal">
                                        <Button Width="30" Margin="0,2,3,1" Name="Solid">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="30" Margin="0,2,2,1" Name="Gradient">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                    <Border Grid.Row="5"  BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent" Grid.ColumnSpan="4" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="27,0,0,0">
                                                    <Button Width="40"  Height="30" Margin="0,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,3,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,3,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="20" Height="15" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Visibility="Visible" Grid.ColumnSpan="4" Grid.Column="0" Name="GridPopup">
                                                    <ToggleButton Name="PopButton" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0" Height="15" HorizontalAlignment="Stretch">
                                                    </ToggleButton>
                                                    <Popup Name="GradPopup" PopupAnimation="Slide" MinWidth="230" AllowsTransparency="True" StaysOpen="True" Width="230"  IsOpen="{Binding ElementName=PopButton, Path=IsChecked}">

                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>
                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="endy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="12" Margin="25,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="12" Margin="20,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="12"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="12" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="12" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy"  Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <Trigger SourceName="EyeDropBorder" Property="IsMouseCaptured" Value="True">
                                    <Setter TargetName="EyeDropBorder" Property="Color" Value="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                    <Setter TargetName="PART_Image" Property="Source" Value="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropColor.png" />
                                </Trigger>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaText" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaSlider" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaValue" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PickerColorBar" Property="Width" Value="{Binding Path=ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" />
                                    <Setter Property="Grid.ColumnSpan" TargetName="PickerColorBar" Value="4" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridBorder" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter Property="Margin" TargetName="Grid" Value="2" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                                <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                                    <Setter Property="EnableToolTip" Value="False" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-7">
                                <Canvas x:Name="Poly">
                                    <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="7.017" VerticalAlignment="Bottom" Width="9" />
                                    <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                        <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                    </Canvas>
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicRGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                    <Condition Property="shared:SkinStorage.EnableTouch" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Name="ColorEditBorder"
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                <Grid x:Name="Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="25" />
                                        <ColumnDefinition Width="12*" />
                                        <ColumnDefinition Width="35" />
                                        <ColumnDefinition Width="130" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="35" />
                                        <RowDefinition Height="35" />
                                        <RowDefinition Height="35" />
                                        <RowDefinition Height="35" />
                                        <RowDefinition Height="35" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Column="0" Grid.Row="0" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="12">
					R:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="1" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="12">
					G:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="2" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="12">
					B:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Name="AlphaText" Grid.Row="3" Style="{StaticResource TextBlockStyle}" Visibility="Visible" HorizontalAlignment="Left" FontSize="12">
					A:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="3" Name="AlphaSlider"   Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <TextBlock  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="3,3" FontSize="12" />
                                    <TextBlock Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="3,3" FontSize="12" />
                                    <TextBlock Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="3,3" FontSize="12" />
                                    <TextBlock Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="3,3" FontSize="12" />
                                    <Rectangle Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Fill="{StaticResource SyncTransparencyBrush}" />
                                    <Rectangle Name="ColorRect"  Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    <StackPanel Grid.Column="3" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="3,1,3,1">
                                        <Button Width="40" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorWhite">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border BorderThickness="1" BorderBrush="#FF000000" CornerRadius="0" Background="#FFFFFFFF" SnapsToDevicePixels="True" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="40" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorBlack">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border CornerRadius="0" Background="#FF000000" SnapsToDevicePixels="True" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <shared:BorderEyeDrop CornerRadius="0" BorderThickness="1" BorderBrush="#FF808080" Width="25" Name="EyeDropBorder">
                                            <Image Width="15" Height="15" Name="PART_Image" VerticalAlignment="Center" HorizontalAlignment="Center" Source="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropGray.png" />
                                        </shared:BorderEyeDrop>
                                    </StackPanel>
                                    <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Name="PART_ColorStringEditor" Grid.Row="3" Height="18" Margin="5,1,5,1" Width="68" MaxLength="9" TextBlock.FontSize="13" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <shared:ColorBar Grid.Row="4" Grid.ColumnSpan="3" Name="PickerColorBar" Height="25" HorizontalAlignment="Stretch" />

                                    <StackPanel Grid.Column="4" Grid.Row="4" HorizontalAlignment="Center" Name="EnableSwitch"  Height="30" Orientation="Horizontal">
                                        <Button Width="25" Margin="2,2,3,1" Name="Solid">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="25" Margin="2,2,2,1" Name="Gradient">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                    <Border Grid.Row="5" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent" Grid.ColumnSpan="4" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,2,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="25,0,0,0">
                                                    <Button Width="40"  Height="30" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,3,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,3,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="20" Height="15" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">
                                                    <StackPanel>
                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="230" Grid.Row="2" Visibility="Visible" Width="230" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" SnapsToDevicePixels="True">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>

                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="12" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="12" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="12"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="12" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="12" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="grady" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <Trigger SourceName="EyeDropBorder" Property="IsMouseCaptured" Value="True">
                                    <Setter TargetName="EyeDropBorder" Property="Color" Value="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                    <Setter TargetName="PART_Image" Property="Source" Value="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropColor.png" />
                                </Trigger>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaText" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaSlider" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaValue" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PickerColorBar" Property="Width" Value="{Binding Path=ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" />
                                    <Setter Property="Grid.ColumnSpan" TargetName="PickerColorBar" Value="4" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridBorder" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter Property="Margin" TargetName="Grid" Value="2" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                                    <Setter Property="EnableToolTip" Value="False" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-7">
                                <Canvas>
                                    <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="7.017" VerticalAlignment="Bottom" Width="9" />
                                    <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                        <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                        <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                    </Canvas>
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicHSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                    <Condition Property="shared:SkinStorage.EnableTouch" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="0.005*" />
                                        <ColumnDefinition Width="0.995*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="150" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" Margin="3,3,3,6">
                                    </Border>
                                    <Canvas Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" ClipToBounds="True" Grid.ColumnSpan="2">
                                        <Path x:Name="SelectorEllipse" Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Data="M34.6665,10 C21.043567,10 9.9999997,21.043793 9.9999997,34.667 9.9999997,48.290207 21.043567,59.334 34.6665,59.334 48.289432,59.334 59.333,48.290207 59.333,34.667 59.333,21.043793 48.289432,10 34.6665,10 z M34.6665,0 C53.812278,0 69.333,15.520945 69.333,34.667 69.333,53.813057 53.812278,69.334 34.6665,69.334 15.52072,69.334 -3.2269691E-07,53.813057 0,34.667 -3.2269691E-07,15.520945 15.52072,0 34.6665,0 z" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" Stretch="Fill" Stroke="#FFFFFFFF" StrokeThickness="0.5" Visibility="Collapsed" Height="90" Width="90">
                                            <Path.Effect>
                                                <DropShadowEffect Direction="294" ShadowDepth="2" Opacity="0.155" />
                                            </Path.Effect>
                                        </Path>
                                        <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                            <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                <Border.Background>
                                                    <SolidColorBrush>
                                                        <SolidColorBrush.Color>
                                                            <Color A="200"  R="255" G="255" B="255" />
                                                        </SolidColorBrush.Color>
                                                    </SolidColorBrush>
                                                </Border.Background>
                                                <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                </TextBox>
                                            </Border>
                                        </Popup>
                                    </Canvas>
                                    <Slider Grid.Column="2"
                Grid.RowSpan="2"
                Orientation="Vertical"
                Grid.Row="0"
                Background="{shared:HSVBackgroundBrush VerticalSlider}"
                Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                Style="{StaticResource MetroSliderCustomStyleVertical}"
                Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />

                                    <StackPanel Grid.Column="3" Grid.Row="1" Margin="5,1,0,0" Orientation="Horizontal">
                                        <TextBox  Name="PART_ColorStringEditor"   Height="27" FontSize="12" Width="68" MaxLength="9"   Style="{StaticResource MetroTextBoxStyle}"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="5,0,0,2"  Height="30" Orientation="Horizontal">

                                            <Button Width="30" Margin="2,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="30" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>

                                    <Grid Grid.Column="3" Grid.Row="0" Margin="3,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="40" />
                                            <ColumnDefinition Width="44" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="30" />
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="1"  Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" FontSize="12" Height="13" shared:SkinStorage.EnableTouch="False">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" FontSize="12" Height="13" shared:SkinStorage.EnableTouch="False">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="3" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" FontSize="12" Height="13" shared:SkinStorage.EnableTouch="False">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="1" Margin="1" Name="Hval" IsEnabled="False" Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" Height="18" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center" VerticalContentAlignment="Center"  />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="2" Margin="1" Name="Sval" IsEnabled="False" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" Height="18" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center" VerticalContentAlignment="Center"  />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="3" Margin="1" Name="Vval" IsEnabled="False"  Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" Height="18" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center" VerticalContentAlignment="Center"  />
                                        <TextBlock Grid.Column="2" Name="AlphaLabel" Grid.Row="0" VerticalAlignment="Bottom" Height="15" FontSize="9.3333" HorizontalAlignment="Center">
					  A:
					  <TextBlock.ToolTip>
					    <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
						  <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
					    </ToolTip>
					  </TextBlock.ToolTip>
				    </TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9.3333">
						R:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9.3333">
						G:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9.3333">
						B:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="0" Name="AlphaVal"  Text="{Binding A, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Bottom" Height="18" FontSize="9" HorizontalAlignment="Center" Margin="1" Width="30" IsEnabled="False"  />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="1" Name="Rval" Text="{Binding R, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" FontSize="9" HorizontalAlignment="Center" Margin="1" Height="18" Width="30" VerticalContentAlignment="Center" IsEnabled="False"  />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="2" Name="Gval" Text="{Binding G, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" FontSize="9" HorizontalAlignment="Center" Margin="1" Height="18" Width="30" VerticalContentAlignment="Center" IsEnabled="False"  />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="3" Name="Bval" Text="{Binding B, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" FontSize="9" HorizontalAlignment="Center" Margin="1" Height="18" Width="30" VerticalContentAlignment="Center" IsEnabled="False"  />
                                        <Rectangle Grid.Column="0" Grid.Row="0"  Grid.ColumnSpan="2" Margin="0,2,0,3"  Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="4" Margin="0,7,0,0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,5,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="10,5,0,0">
                                                    <Button Width="40"  Height="30" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,3,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,5,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderBrush="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">

                                                    <ToggleButton Name="PopButton" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="-1,0,-1,0" Height="15" ClickMode="Press" HorizontalAlignment="Stretch">
                                                    </ToggleButton>

                                                    <Popup Name="GradPopup" PopupAnimation="Slide" AllowsTransparency="True" MinWidth="230" StaysOpen="True" Width="360"
					   IsOpen="{Binding ElementName= PopButton, Path=IsChecked}">
                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="80" />
                                                                            <ColumnDefinition Width="80" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">

                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"  shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                                <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                                    <Setter Property="EnableToolTip" Value="False" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-7">
                                <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="{StaticResource GlyphBrush}" Data="F1 M 504.02,397.338L 501.4,394.77L 498.768,392.191L 496.135,394.77L 493.515,397.338L 493.502,397.338L 493.502,402.113L 504.033,402.113L 504.033,397.338L 504.02,397.338 Z " HorizontalAlignment="Right"  Width="10.531" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicHSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                    <Condition Property="shared:SkinStorage.EnableTouch" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True"
            Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="160" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="160" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" Margin="3,3,3,6">
                                    </Border>
                                    <Canvas Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" ClipToBounds="True" Margin="3">
                                        <Path x:Name="SelectorEllipse" Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Data="M34.6665,10 C21.043567,10 9.9999997,21.043793 9.9999997,34.667 9.9999997,48.290207 21.043567,59.334 34.6665,59.334 48.289432,59.334 59.333,48.290207 59.333,34.667 59.333,21.043793 48.289432,10 34.6665,10 z M34.6665,0 C53.812278,0 69.333,15.520945 69.333,34.667 69.333,53.813057 53.812278,69.334 34.6665,69.334 15.52072,69.334 -3.2269691E-07,53.813057 0,34.667 -3.2269691E-07,15.520945 15.52072,0 34.6665,0 z" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" Stretch="Fill" Stroke="#FFFFFFFF" StrokeThickness="0.5" Visibility="Collapsed" Height="90" Width="90">
                                            <Path.Effect>
                                                <DropShadowEffect Direction="294" ShadowDepth="2" Opacity="0.155" />
                                            </Path.Effect>
                                        </Path>
                                        <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                            <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                <Border.Background>
                                                    <SolidColorBrush>
                                                        <SolidColorBrush.Color>
                                                            <Color A="200"  R="255" G="255" B="255" />
                                                        </SolidColorBrush.Color>
                                                    </SolidColorBrush>
                                                </Border.Background>
                                                <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                </TextBox>
                                            </Border>
                                        </Popup>
                                    </Canvas>
                                    <Slider Grid.Column="1" Grid.RowSpan="2" Margin="3,0,0,0" Orientation="Vertical" Grid.Row="0" Background="{shared:HSVBackgroundBrush VerticalSlider}"
                                             Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource MetroSliderCustomStyleVertical}"
                                             Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="1" Margin="5,2,0,0" Orientation="Horizontal">
                                        <TextBox  Name="PART_ColorStringEditor"
                 Height="25" Width="68" MaxLength="9" FontSize="13" Style="{StaticResource MetroTextBoxStyle}"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="5,0,0,2"  Height="30" Orientation="Horizontal">
                                            <Button Width="30" Margin="2,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="30" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0" Margin="3,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="40" />
                                            <ColumnDefinition Width="44" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="30" />
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="1"  Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" FontSize="13" shared:SkinStorage.EnableTouch="False" HorizontalAlignment="Center">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" FontSize="13" shared:SkinStorage.EnableTouch="False" HorizontalAlignment="Center">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="3" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" FontSize="13" shared:SkinStorage.EnableTouch="False" HorizontalAlignment="Center">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="1" Margin="2" IsEnabled="False" Name="Hval"  Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" FontSize="12" HorizontalAlignment="Center" VerticalContentAlignment="Center" Width="30" BorderBrush="{StaticResource ContentBorderBrush}"  />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="2" Margin="2" IsEnabled="False" Name="Sval" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" FontSize="12" HorizontalAlignment="Center" VerticalContentAlignment="Center"  Width="30" BorderBrush="{StaticResource ContentBorderBrush}"   />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="3" Margin="2" IsEnabled="False" Name="Vval" Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" FontSize="12" HorizontalAlignment="Center" VerticalContentAlignment="Center"  Width="30" BorderBrush="{StaticResource ContentBorderBrush}"   />
                                        <TextBlock Grid.Column="2" Name="AlphaLabel" Grid.Row="0" VerticalAlignment="Bottom" Height="21" HorizontalAlignment="Center" FontSize="12">
					  A:
					  <TextBlock.ToolTip>
					    <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
						  <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
					    </ToolTip>
					  </TextBlock.ToolTip>
				    </TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="1" HorizontalAlignment="Center" FontSize="12">
						R:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="2" HorizontalAlignment="Center" FontSize="12">
						G:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="3" HorizontalAlignment="Center" FontSize="12">
						B:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="0" Margin="2" Name="AlphaVal" IsEnabled="False"  Text="{Binding A, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Bottom" FontSize="12" Width="30" BorderBrush="{StaticResource ContentBorderBrush}"   />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="1" Margin="2" Name="Rval" IsEnabled="False" Text="{Binding R, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" FontSize="12" HorizontalAlignment="Center" VerticalContentAlignment="Center"  Width="30" BorderBrush="{StaticResource ContentBorderBrush}"   />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="2" Margin="2" Name="Gval" IsEnabled="False"  Text="{Binding G, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" FontSize="12" HorizontalAlignment="Center" VerticalContentAlignment="Center"  Width="30" BorderBrush="{StaticResource ContentBorderBrush}"    />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="3" Margin="2" Name="Bval" IsEnabled="False" Text="{Binding B, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" FontSize="12" HorizontalAlignment="Center" VerticalContentAlignment="Center"  Width="30" BorderBrush="{StaticResource ContentBorderBrush}"   />
                                        <Rectangle Grid.Column="0" Grid.Row="0"  Grid.ColumnSpan="2" Margin="0,0,0,3"  Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0,7,0,0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,5,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="15,0,0,0">
                                                    <Button Width="40"  Height="30" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" HorizontalAlignment="Center" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="2,0,0,0" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" HorizontalAlignment="Center" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="2,0,0,0" Width="40"   VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Visibility="Visible" Grid.ColumnSpan="2" Name="GridPopup">
                                                    <StackPanel>
                                                        <!--<ToggleButton Name="ButtonExt" Visibility="Visible" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Height="12" Margin="0,2,0,0" HorizontalAlignment="Stretch">
                                                        </ToggleButton>-->

                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="210" Grid.Row="2" Visibility="Visible" Width="{TemplateBinding Width}" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">

                                                            <!--<Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">-->
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="12" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="12" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="12"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="12"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="80" />
                                                                            <ColumnDefinition Width="80" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="centrey" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">

                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                                    <Setter Property="EnableToolTip" Value="False" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-7">
                                <Path Stretch="Fill" Fill="#FFFFFFFF" Stroke="{StaticResource GlyphBrush}" Data="F1 M 504.02,397.338L 501.4,394.77L 498.768,392.191L 496.135,394.77L 493.515,397.338L 493.502,397.338L 493.502,402.113L 504.033,402.113L 504.033,397.338L 504.02,397.338 Z " HorizontalAlignment="Right" Width="10.531" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="HSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                    <Condition Property="shared:SkinStorage.EnableTouch" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0"
                                    BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="160" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="160" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="7,3,3,3" BorderBrush="{StaticResource ContentBorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>

                                            <Border Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}"  Grid.ColumnSpan="2" Grid.Column="0" Grid.Row="0" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0" SnapsToDevicePixels="True">
                                            </Border>
                                            <Grid Grid.Row="1" Grid.Column="0" Margin="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>

                                            <Grid Grid.Column="1" Grid.Row="1" Margin="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>

                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Path x:Name="SelectorEllipse" Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Data="M34.6665,10 C21.043567,10 9.9999997,21.043793 9.9999997,34.667 9.9999997,48.290207 21.043567,59.334 34.6665,59.334 48.289432,59.334 59.333,48.290207 59.333,34.667 59.333,21.043793 48.289432,10 34.6665,10 z M34.6665,0 C53.812278,0 69.333,15.520945 69.333,34.667 69.333,53.813057 53.812278,69.334 34.6665,69.334 15.52072,69.334 -3.2269691E-07,53.813057 0,34.667 -3.2269691E-07,15.520945 15.52072,0 34.6665,0 z" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" Stretch="Fill" Stroke="#FFFFFFFF" StrokeThickness="0.5" Visibility="Collapsed" Height="90" Width="90">
                                                    <Path.Effect>
                                                        <DropShadowEffect Direction="294" ShadowDepth="2" Opacity="0.155" />
                                                    </Path.Effect>
                                                </Path>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
                                                   HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                                                             Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>
                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="7,0,0,0" Orientation="Vertical" Grid.Row="0" Background="{shared:HSVBackgroundBrush VerticalSlider}"
                                            Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                                            Style="{StaticResource MetroSliderCustomStyleVertical}"
                                            Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />

                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor" Height="25" Width="68" MaxLength="9" FontSize="13" Margin="2,2,0,0" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="30" Orientation="Horizontal">
                                            <Button Width="30" Margin="0,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="30" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0" Margin="3,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="80" />
                                            <ColumnDefinition Width="35" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="0"  Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" Margin="2,4,0,4" shared:SkinStorage.EnableTouch="False" FontSize="13" HorizontalAlignment="Left">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="1" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" Margin="2,4,0,4" shared:SkinStorage.EnableTouch="False" FontSize="13" HorizontalAlignment="Left">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" Margin="2,4,0,4" shared:SkinStorage.EnableTouch="False" FontSize="13" HorizontalAlignment="Left">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <Slider Grid.Column="1" Grid.Row="0" x:Name="SliderH" Background="{TemplateBinding Background}" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=H, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Minimum="0" Maximum="360" Margin="5,0,0,0" />
                                        <Slider Grid.Column="1" Grid.Row="1" x:Name="SliderS" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=S, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Margin="5,0,0,0" />
                                        <Slider Grid.Column="1" Grid.Row="2" x:Name="SliderV" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=V, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Margin="5,0,0,0" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="0" Margin="2" Name="Hval" Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" BorderBrush="{StaticResource ContentBorderBrush}" IsEnabled="False" Width="35" Height="20" FontSize="9.33333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Margin="2" Name="Sval" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" BorderBrush="{StaticResource ContentBorderBrush}" IsEnabled="False" Width="35" Height="20" FontSize="9.33333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Margin="2" Name="Vval"  Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" BorderBrush="{StaticResource ContentBorderBrush}" IsEnabled="False" Width="35" Height="20" FontSize="9.33333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="40"  Height="30" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,3,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroRadialButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,5,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">

                                                    <ToggleButton Name="PopButton" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Background="{DynamicResource BackgroundBrush}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0,2,0,0" ClickMode="Press" Height="24" HorizontalAlignment="Stretch">
                                                    </ToggleButton>

                                                    <Popup Name="GradPopup" PopupAnimation="Slide" AllowsTransparency="True" MinWidth="230" StaysOpen="True" Width="360"
					   IsOpen="{Binding ElementName= PopButton, Path=IsChecked}">
                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>

                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">

                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <!--<Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>-->
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                                <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                                    <Setter Property="EnableToolTip" Value="False" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-3">
                                <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 563.502,268.191L 558.259,263.053L 552.99,257.891L 547.721,263.053L 542.478,268.191L 542.452,268.191L 542.452,277.747L 563.529,277.747L 563.529,268.191L 563.502,268.191 Z " HorizontalAlignment="Right" Height="15.857" VerticalAlignment="Top" Width="21.077" Stroke="#FF878787" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="HSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                    <Condition Property="shared:SkinStorage.EnableTouch" Value="True" />
                </MultiTrigger.Conditions>

                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0"
                                    BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="160" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="160" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" BorderBrush="{StaticResource ContentBorderBrush}" Margin="7,3,3,3" BorderThickness="1" SnapsToDevicePixels="True">

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="1" Grid.Column="0" Margin="0">
                                                <Border CornerRadius="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Grid Grid.Column="1" Grid.Row="1" Margin="0">
                                                <Border CornerRadius="0">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Border Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0" Grid.ColumnSpan="2" Grid.Column="0" Grid.Row="0">
                                            </Border>
                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Path x:Name="SelectorEllipse" Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Data="M34.6665,10 C21.043567,10 9.9999997,21.043793 9.9999997,34.667 9.9999997,48.290207 21.043567,59.334 34.6665,59.334 48.289432,59.334 59.333,48.290207 59.333,34.667 59.333,21.043793 48.289432,10 34.6665,10 z M34.6665,0 C53.812278,0 69.333,15.520945 69.333,34.667 69.333,53.813057 53.812278,69.334 34.6665,69.334 15.52072,69.334 -3.2269691E-07,53.813057 0,34.667 -3.2269691E-07,15.520945 15.52072,0 34.6665,0 z" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" Stretch="Fill" Stroke="#FFFFFFFF" StrokeThickness="0.5" Visibility="Collapsed" Height="90" Width="90">
                                                    <Path.Effect>
                                                        <DropShadowEffect Direction="294" ShadowDepth="2" Opacity="0.155" />
                                                    </Path.Effect>
                                                </Path>

                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
                                                   HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="0" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                                                             Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>
                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="7,0,0,0" Orientation="Vertical" Grid.Row="0" Background="{shared:HSVBackgroundBrush VerticalSlider}"
                                            Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                                            Style="{StaticResource MetroSliderCustomStyleVertical}"
                                            Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor" Height="25" Width="68" MaxLength="9"  FontSize="9.3333" Margin="2,2,0,0" VerticalAlignment="Top" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="30" Orientation="Horizontal" VerticalAlignment="Top">
                                            <Button Width="30" Margin="0,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="30" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>

                                    <Grid Grid.Column="2" Grid.Row="0" Margin="3,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="80" />
                                            <ColumnDefinition Width="35" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="0" Margin="2,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" shared:SkinStorage.EnableTouch="False">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="1" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" FontSize="9.3333" HorizontalAlignment="Left" Margin="2,4,0,4" shared:SkinStorage.EnableTouch="False">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" FontSize="9.3333" HorizontalAlignment="Left" Margin="2,4,0,4" shared:SkinStorage.EnableTouch="False">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <Slider Grid.Column="1" Grid.Row="0" x:Name="SliderH" Background="{TemplateBinding Background}" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=H, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Minimum="0" Maximum="360" />
                                        <Slider Grid.Column="1" Grid.Row="1" x:Name="SliderS" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=S, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                        <Slider Grid.Column="1" Grid.Row="2" x:Name="SliderV" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=V, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="0" Margin="2" Name="Hval" Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Margin="2" Name="Sval" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Margin="2" Name="Vval"  Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" BorderBrush="{StaticResource ContentBorderBrush}" />
                                    </Grid>

                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <Grid Grid.Column="0"  Grid.Row="0" Margin="3,0,0,0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="40"  Height="30" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="2,0,0,0" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroRadialButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>

                                                    <Button Height="30" Margin="2,0,0,0" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">
                                                    <StackPanel>
                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="230" Grid.Row="2" Visibility="Visible" Width="230" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="12" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="12" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty"  Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>

                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="grady" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                    <!--</Popup>-->
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                                    <Setter Property="EnableToolTip" Value="False" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-5">
                                <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 563.502,268.191L 558.259,263.053L 552.99,257.891L 547.721,263.053L 542.478,268.191L 542.452,268.191L 542.452,277.747L 563.529,277.747L 563.529,268.191L 563.502,268.191 Z " HorizontalAlignment="Right" Height="19.857" VerticalAlignment="Top" Width="21.077" Stroke="#FF878787" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>

                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="RGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                    <Condition Property="shared:SkinStorage.EnableTouch" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0" BorderBrush="{TemplateBinding BorderBrush}"  BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True"  Background="{TemplateBinding Background}" Margin="0,5,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="160" />
                                        <ColumnDefinition Width="35" />
                                        <ColumnDefinition Width="160" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="7,3,3,3" BorderBrush="{StaticResource ContentBorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="1" Grid.Column="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,-1,0.5"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Grid Grid.Row="1" Grid.Column="1">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Border Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0">
                                            </Border>
                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Path x:Name="SelectorEllipse" Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Data="M34.6665,10 C21.043567,10 9.9999997,21.043793 9.9999997,34.667 9.9999997,48.290207 21.043567,59.334 34.6665,59.334 48.289432,59.334 59.333,48.290207 59.333,34.667 59.333,21.043793 48.289432,10 34.6665,10 z M34.6665,0 C53.812278,0 69.333,15.520945 69.333,34.667 69.333,53.813057 53.812278,69.334 34.6665,69.334 15.52072,69.334 -3.2269691E-07,53.813057 0,34.667 -3.2269691E-07,15.520945 15.52072,0 34.6665,0 z" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" Stretch="Fill" Stroke="#FFFFFFFF" StrokeThickness="0.5" Visibility="Collapsed" Height="90" Width="90">
                                                    <Path.Effect>
                                                        <DropShadowEffect Direction="294" ShadowDepth="2" Opacity="0.155" />
                                                    </Path.Effect>
                                                </Path>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>

                                    <Slider Grid.Column="1" Grid.RowSpan="3" Orientation="Vertical" Grid.Row="0"
                Background="{shared:HSVBackgroundBrush VerticalSlider}"
                Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                Style="{StaticResource MetroSliderCustomStyleVertical}"
                Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Name="PART_ColorStringEditor" Height="25" Width="75" Style="{StaticResource MetroTextBoxStyle}"
                 FontSize="13" Margin="2,0,0,0" MaxLength="9"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="30" Orientation="Horizontal" VerticalAlignment="Top">

                                            <Button Width="30" Margin="2,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="30" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0" Margin="3,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="80" />
                                            <ColumnDefinition Width="35" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <TextBlock Grid.Column="0" Grid.Row="0"  Foreground="{TemplateBinding Foreground}" Text="R" Margin="4,4,0,4" FontSize="12.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="1" Text="G" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="12.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="2" Text="B" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="12.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="3" Text="A" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="12.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="3" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <TextBlock  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="2" FontSize="13" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        <TextBlock Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="2"  FontSize="13" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        <TextBlock Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="2"  FontSize="13" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        <TextBlock Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="12.3333" FontWeight="SemiBold" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0,5,0,0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="16" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="15,0,0,0">
                                                    <Button Width="40"  Height="30" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,3,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="0,2,5,1" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">

                                                    <ToggleButton Name="PopButton" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0,2,0,0" ClickMode="Press" Height="25" HorizontalAlignment="Stretch">
                                                    </ToggleButton>

                                                    <Popup Name="GradPopup" PopupAnimation="Slide" AllowsTransparency="True" MinWidth="230" StaysOpen="True" Width="360"
					   IsOpen="{Binding ElementName= PopButton, Path=IsChecked}">
                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="12" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="12" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="12" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="12" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="12"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="12" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="12" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                                <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                                    <Setter Property="EnableToolTip" Value="False" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-5">
                                <Path Stretch="Uniform" Fill="#FFFFFFFF" Stroke="{StaticResource GlyphBrush}" SnapsToDevicePixels="True" Data="F1 M 504.02,397.338L 501.4,394.77L 498.768,392.191L 496.135,394.77L 493.515,397.338L 493.502,397.338L 493.502,402.113L 504.033,402.113L 504.033,397.338L 504.02,397.338 Z " HorizontalAlignment="Right" Width="15.531" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="RGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                    <Condition Property="shared:SkinStorage.EnableTouch" Value="True" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0" BorderBrush="{TemplateBinding BorderBrush}" SnapsToDevicePixels="True" BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="160" />
                                        <ColumnDefinition Width="25" />
                                        <ColumnDefinition Width="150" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="7,3,3,3" BorderBrush="{StaticResource ContentBorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="1" Grid.Column="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,-1,0.5" SnapsToDevicePixels="True"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Grid Grid.Row="1" Grid.Column="1">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Border Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0">
                                            </Border>
                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Path x:Name="SelectorEllipse" Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" Data="M34.6665,10 C21.043567,10 9.9999997,21.043793 9.9999997,34.667 9.9999997,48.290207 21.043567,59.334 34.6665,59.334 48.289432,59.334 59.333,48.290207 59.333,34.667 59.333,21.043793 48.289432,10 34.6665,10 z M34.6665,0 C53.812278,0 69.333,15.520945 69.333,34.667 69.333,53.813057 53.812278,69.334 34.6665,69.334 15.52072,69.334 -3.2269691E-07,53.813057 0,34.667 -3.2269691E-07,15.520945 15.52072,0 34.6665,0 z" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" Stretch="Fill" Stroke="#FFFFFFFF" StrokeThickness="0.5" Visibility="Collapsed" Height="90" Width="90">
                                                    <Path.Effect>
                                                        <DropShadowEffect Direction="294" ShadowDepth="2" Opacity="0.155" />
                                                    </Path.Effect>
                                                </Path>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>

                                    <Slider Grid.Column="1" Grid.RowSpan="3" Orientation="Vertical" Grid.Row="0"
                Background="{shared:HSVBackgroundBrush VerticalSlider}"
                Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                Style="{StaticResource MetroSliderCustomStyleVertical}"
                Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Name="PART_ColorStringEditor" Height="25" Width="68" MaxLength="9" Style="{StaticResource MetroTextBoxStyle}"
                 FontSize="12.333"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}" VerticalAlignment="Center" HorizontalAlignment="Center" VerticalContentAlignment="Center">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="30" Orientation="Horizontal">

                                            <Button Width="30" Margin="0,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="30" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0" Margin="3,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="80" />
                                            <ColumnDefinition Width="45" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <!--<RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />-->
                                        </Grid.RowDefinitions>
                                        <TextBlock Grid.Column="0" Grid.Row="0"  Foreground="{TemplateBinding Foreground}" Text="R" Margin="4,4,0,4" FontSize="12.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="1" Text="G" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="12.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="2" Text="B" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="12.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="3" Text="A" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="12.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="3" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}"  Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}"  Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}"  Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible"  Text="{shared:ScRGBColorExtension A}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="16" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="40"  Height="30" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="2,0,0,0" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="30" Margin="2,0,0,0" Width="40"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="20" Height="15" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">
                                                    <StackPanel>
                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="230" Grid.Row="2" Visibility="Visible" Width="360" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="12" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="12" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="12"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="12"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="12" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="12" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="12"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="12" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="12" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="grady" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" shared:SkinStorage.EnableTouch="False" ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" shared:SkinStorage.EnableTouch="False"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                    <!--</Popup>-->
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <!--<Trigger Property="IsAlphaVisible" Value="False">
                                        <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                        <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                    </Trigger>-->
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ThumbTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="-5">
                                <Path Stretch="Fill" Fill="#FFFFFFFF" Data="F1 M 669.501,341.01L 669.501,341.006L 671.501,341.006L 671.501,340.006L 671.501,339.506L 671.501,339.015L 671.501,338.681L 671.501,337.499L 670.501,337.499L 670.501,336.999L 669.501,336.999L 669.501,335.493L 668.501,335.493L 668.501,334.993L 667.501,334.993L 667.501,335.493L 666.501,335.493L 666.501,336.999L 665.501,336.999L 665.501,337.499L 664.501,337.499L 664.501,338.681L 664.501,339.015L 664.501,339.506L 664.501,340.006L 664.501,341.006L 666.501,341.006L 666.501,341.01L 669.501,341.01 Z " HorizontalAlignment="Left" Height="6.017" VerticalAlignment="Bottom" Width="9" />
                                <Canvas Width="9" Height="8.0166" VerticalAlignment="Bottom">
                                    <Rectangle Width="1" Height="1" Canvas.Left="6" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="7" Height="1" Canvas.Left="1" Canvas.Top="7.0166" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="5" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="4" Canvas.Top="0" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="3" Canvas.Top="1" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="2" Canvas.Top="2" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="1" Canvas.Left="1" Canvas.Top="3.00589" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Rectangle Width="1" Height="3.00781" Canvas.Left="0" Canvas.Top="4.00879" Stretch="Fill" Fill="{StaticResource GlyphBrush}" />
                                    <Path Width="2" Height="4.0166" Canvas.Left="7" Canvas.Top="3" Stretch="Fill" Fill="{StaticResource GlyphBrush}" Data="F1 M 9,4.00879L 8,4.00879L 8,3L 7,3L 7,4.01071L 8,4.01071L 8,7.0166L 9,7.0166L 9,4.00879 Z " />
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <!-- Custom ThumbTemplate Styles -->
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicRGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                    <Condition Property="ThumbTemplate" Value="{x:Null}" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Name="ColorEditBorder" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                <!--<Border.Effect>
                                    <DropShadowEffect Opacity="0.31" />
                                </Border.Effect>-->
                                <Grid Name="Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="18" />
                                        <ColumnDefinition Width="20*" />
                                        <ColumnDefinition Width="24" />
                                        <ColumnDefinition Width="76" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Column="0" Grid.Row="0" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					R:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="1" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					G:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="2" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					B:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Name="AlphaText" Grid.Row="3" Style="{StaticResource TextBlockStyle}" Visibility="Visible" HorizontalAlignment="Left" FontSize="9">
					A:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="3" Name="AlphaSlider"   Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <TextBlock  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="3,3" FontSize="7" />
                                    <TextBlock Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="3,3" FontSize="7" />
                                    <TextBlock Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="3,3" FontSize="7" />
                                    <TextBlock Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="3,3" FontSize="7" />
                                    <Rectangle Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Fill="{StaticResource SyncTransparencyBrush}" SnapsToDevicePixels="True" />
                                    <Rectangle Name="ColorRect"  Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    <StackPanel Grid.Column="3" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5,1,5,1">
                                        <Button Width="20" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorWhite">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border BorderThickness="1" BorderBrush="#FF000000" CornerRadius="0" Background="#FFFFFFFF" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="20" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorBlack">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border CornerRadius="0" Background="#FF000000" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <shared:BorderEyeDrop CornerRadius="0"  BorderThickness="1" BorderBrush="#FF808080" Width="20" Name="EyeDropBorder">
                                            <Image Width="15" Height="15" Name="PART_Image" VerticalAlignment="Center" HorizontalAlignment="Center"   Source="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropGray.png" />
                                        </shared:BorderEyeDrop>
                                    </StackPanel>
                                    <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Name="PART_ColorStringEditor" Width="68" MaxLength="9" Grid.Row="3" Height="18" Margin="5,1,5,1" TextBlock.FontSize="9" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" VerticalAlignment="Center" />
                                    <shared:ColorBar Grid.Row="4" Grid.ColumnSpan="3" x:Name="PickerColorBar" Height="20" HorizontalAlignment="Stretch" />

                                    <StackPanel Grid.Column="4" Grid.Row="4" HorizontalAlignment="Center" Name="EnableSwitch"  Height="20" Orientation="Horizontal">
                                        <Button Width="25" Margin="0,2,3,1" Name="Solid">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="30" Margin="0,2,2,1" Name="Gradient">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                    <Border Grid.Row="5"  BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent" Grid.ColumnSpan="4" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="27,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="0,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Visibility="Visible" Grid.ColumnSpan="4" Grid.Column="0" Name="GridPopup">
                                                    <ToggleButton Name="PopButton" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0" Height="15" HorizontalAlignment="Stretch">
                                                    </ToggleButton>
                                                    <Popup Name="GradPopup" PopupAnimation="Slide" MinWidth="230" AllowsTransparency="True" StaysOpen="True" Width="230"  IsOpen="{Binding ElementName=PopButton, Path=IsChecked}">

                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>
                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1" ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="25,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="20,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy"  Margin="1" ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <Trigger SourceName="EyeDropBorder" Property="IsMouseCaptured" Value="True">
                                    <Setter TargetName="EyeDropBorder" Property="Color" Value="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                    <Setter TargetName="PART_Image" Property="Source" Value="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropColor.png" />
                                </Trigger>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaText" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaSlider" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaValue" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PickerColorBar" Property="Width" Value="{Binding Path=ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" />
                                    <Setter Property="Grid.ColumnSpan" TargetName="PickerColorBar" Value="4" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridBorder" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter Property="Margin" TargetName="Grid" Value="2" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicRGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                    <Condition Property="ThumbTemplate" Value="{x:Null}" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Name="ColorEditBorder"
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                <Grid x:Name="Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="18" />
                                        <ColumnDefinition Width="90" />
                                        <ColumnDefinition Width="24" />
                                        <ColumnDefinition Width="96" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="20" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Column="0" Grid.Row="0" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					R:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="1" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					G:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Grid.Row="2" Style="{StaticResource TextBlockStyle}" HorizontalAlignment="Left" FontSize="9">
					B:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <TextBlock Grid.Column="0" Name="AlphaText" Grid.Row="3" Style="{StaticResource TextBlockStyle}" Visibility="Visible" HorizontalAlignment="Left" FontSize="9">
					A:
					<TextBlock.ToolTip>
						<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
							<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
						</ToolTip>
					</TextBlock.ToolTip>
				</TextBlock>
                                    <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Slider Grid.Column="1" Grid.Row="3" Name="AlphaSlider"   Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <TextBlock  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="3,3" FontSize="9" />
                                    <TextBlock Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="3,3" FontSize="9" />
                                    <TextBlock Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="3,3" FontSize="9" />
                                    <TextBlock Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="3,3" FontSize="9" />
                                    <Rectangle Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Fill="{StaticResource SyncTransparencyBrush}" />
                                    <Rectangle Name="ColorRect"  Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="5,4,5,4" Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    <StackPanel Grid.Column="3" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5,1,5,1">
                                        <Button Width="20" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorWhite">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border BorderThickness="1" BorderBrush="#FF000000" CornerRadius="0" Background="#FFFFFFFF" SnapsToDevicePixels="True" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="20" Margin="0,0,2,0" Command="shared:ColorEdit.M_changeColorBlack">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border CornerRadius="0" Background="#FF000000" SnapsToDevicePixels="True" />
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <shared:BorderEyeDrop CornerRadius="0" BorderThickness="1" BorderBrush="#FF808080" Width="20" Name="EyeDropBorder">
                                            <Image Width="15" Height="15" Name="PART_Image" VerticalAlignment="Center" HorizontalAlignment="Center" Source="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropGray.png" />
                                        </shared:BorderEyeDrop>
                                    </StackPanel>
                                    <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Name="PART_ColorStringEditor" Grid.Row="3" Height="18" Width="68" MaxLength="9" Margin="5,1,5,1" TextBlock.FontSize="9" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <shared:ColorBar Grid.Row="4" Grid.ColumnSpan="3" Name="PickerColorBar" Height="20" HorizontalAlignment="Stretch" />

                                    <StackPanel Grid.Column="4" Grid.Row="4" HorizontalAlignment="Center" Name="EnableSwitch"  Height="20" Orientation="Horizontal">
                                        <Button Width="25" Margin="2,2,3,1" Name="Solid">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                        <Button Width="25" Margin="2,2,2,1" Name="Gradient">
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
													<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </StackPanel>
                                    <Border Grid.Row="5" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent" Grid.ColumnSpan="4" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,2,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="25,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">
                                                    <StackPanel>
                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="230" Grid.Row="2" Visibility="Visible" Width="230" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" SnapsToDevicePixels="True">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>

                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <Trigger SourceName="EyeDropBorder" Property="IsMouseCaptured" Value="True">
                                    <Setter TargetName="EyeDropBorder" Property="Color" Value="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                    <Setter TargetName="PART_Image" Property="Source" Value="pack://application:,,,/Syncfusion.Shared.WPF;component/Controls/ColorPicker/Images/EyeDropColor.png" />
                                </Trigger>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaText" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaSlider" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaValue" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PickerColorBar" Property="Width" Value="{Binding Path=ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}" />
                                    <Setter Property="Grid.ColumnSpan" TargetName="PickerColorBar" Value="4" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridBorder" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter Property="Margin" TargetName="Grid" Value="2" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicHSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                    <Condition Property="ThumbTemplate" Value="{x:Null}" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="0.005*" />
                                        <ColumnDefinition Width="0.995*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="125" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" Margin="3,3,3,6">
                                    </Border>
                                    <Canvas Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" ClipToBounds="True" Grid.ColumnSpan="2">
                                        <Ellipse
            Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                        </Ellipse>
                                        <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                            <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                <Border.Background>
                                                    <SolidColorBrush>
                                                        <SolidColorBrush.Color>
                                                            <Color A="200"  R="255" G="255" B="255" />
                                                        </SolidColorBrush.Color>
                                                    </SolidColorBrush>
                                                </Border.Background>
                                                <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                </TextBox>
                                            </Border>
                                        </Popup>
                                    </Canvas>
                                    <Slider Grid.Column="2"
                Grid.RowSpan="2"
                Margin="5,0,5,6"
                Orientation="Vertical"
                Grid.Row="0"
                Background="{shared:HSVBackgroundBrush VerticalSlider}"
                Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                Style="{StaticResource MetroSliderCustomStyleVertical}"
                Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />

                                    <StackPanel Grid.Column="3" Grid.Row="1" Margin="5,1,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor"
                 Height="20" FontSize="9.3333" Width="68" MaxLength="9"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="5,0,0,2"  Height="20" Orientation="Horizontal">

                                            <Button Width="20" Margin="2,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>

                                    <Grid Grid.Column="3" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="16" />
                                            <ColumnDefinition Width="32" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="22" />
                                            <RowDefinition Height="22" />
                                            <RowDefinition Height="22" />
                                            <!--<RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />-->
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="1"  Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" FontSize="9.3333" Height="13">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" FontSize="9.3333" Height="13">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="3" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" FontSize="9.3333" Height="13">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="1" Margin="1" Name="Hval" IsEnabled="False" Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" Height="18" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="2" Margin="1" Name="Sval" IsEnabled="False" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" Height="18" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="3" Margin="1" Name="Vval" IsEnabled="False"  Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" Height="18" FontSize="9" HorizontalAlignment="Center" VerticalAlignment="Center" VerticalContentAlignment="Center" />
                                        <TextBlock Grid.Column="2" Name="AlphaLabel" Grid.Row="0" VerticalAlignment="Bottom" Height="15" FontSize="9.3333" HorizontalAlignment="Center">
					  A:
					  <TextBlock.ToolTip>
					    <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
						  <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
					    </ToolTip>
					  </TextBlock.ToolTip>
				    </TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9.3333">
						R:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="2" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9.3333">
						G:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="9.3333">
						B:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="0" Name="AlphaVal"  Text="{Binding A, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Bottom" Height="18" FontSize="9" HorizontalAlignment="Center" Margin="1" Width="30" IsEnabled="False" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="1" Name="Rval" Text="{Binding R, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" FontSize="9" HorizontalAlignment="Center" Margin="1" Height="18" Width="30" VerticalContentAlignment="Center" IsEnabled="False" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="2" Name="Gval" Text="{Binding G, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" FontSize="9" HorizontalAlignment="Center" Margin="1" Height="18" Width="30" VerticalContentAlignment="Center" IsEnabled="False" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="3" Name="Bval" Text="{Binding B, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" FontSize="9" HorizontalAlignment="Center" Margin="1" Height="18" Width="30" VerticalContentAlignment="Center" IsEnabled="False" />
                                        <Rectangle Grid.Column="0" Grid.Row="0"  Grid.ColumnSpan="2" Margin="0,2,0,3"  Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="4" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="5,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,5,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderBrush="{StaticResource BorderBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">

                                                    <ToggleButton Name="PopButton" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="-1,0,-1,0" Height="15" ClickMode="Press" HorizontalAlignment="Stretch">
                                                    </ToggleButton>

                                                    <Popup Name="GradPopup" PopupAnimation="Slide" AllowsTransparency="True" MinWidth="230" StaysOpen="True" Width="230"
					   IsOpen="{Binding ElementName= PopButton, Path=IsChecked}">
                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="80" />
                                                                            <ColumnDefinition Width="80" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">

                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="ClassicHSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                    <Condition Property="ThumbTemplate" Value="{x:Null}" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True"
            Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="7*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="125" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" Margin="3,3,3,6">
                                    </Border>
                                    <Canvas Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" ClipToBounds="True" Margin="3">
                                        <Ellipse
            Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                        </Ellipse>
                                        <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                            <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                <Border.Background>
                                                    <SolidColorBrush>
                                                        <SolidColorBrush.Color>
                                                            <Color A="200"  R="255" G="255" B="255" />
                                                        </SolidColorBrush.Color>
                                                    </SolidColorBrush>
                                                </Border.Background>
                                                <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                </TextBox>
                                            </Border>
                                        </Popup>
                                    </Canvas>
                                    <Slider Grid.Column="1" Grid.RowSpan="2" Margin="3,0,0,0" Orientation="Vertical" Grid.Row="0" Background="{shared:HSVBackgroundBrush VerticalSlider}"
                                             Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource MetroSliderCustomStyleVertical}"
                                             Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="1" Margin="5,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor"
                 Height="20" FontSize="9.33333" Width="68" MaxLength="9"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="5,0,0,2"  Height="20" Orientation="Horizontal">

                                            <Button Width="20" Margin="2,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="29" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="16" />
                                            <ColumnDefinition Width="32" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="22" />
                                            <RowDefinition Height="22" />
                                            <RowDefinition Height="22" />
                                            <!--<RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />-->
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="1"  Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" FontSize="9" HorizontalAlignment="Center">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" FontSize="9" HorizontalAlignment="Center">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="3" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" FontSize="9" HorizontalAlignment="Center">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="1" Margin="1" IsEnabled="False" Name="Hval"  Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" FontSize="9" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="2" Margin="1" IsEnabled="False" Name="Sval" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" FontSize="9" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="1" Grid.Row="3" Margin="1" IsEnabled="False" Name="Vval" Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" FontSize="9" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBlock Grid.Column="2" Name="AlphaLabel" Grid.Row="0" VerticalAlignment="Bottom" Height="21" HorizontalAlignment="Center" FontSize="9">
					  A:
					  <TextBlock.ToolTip>
					    <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
						  <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
					    </ToolTip>
					  </TextBlock.ToolTip>
				    </TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="1" HorizontalAlignment="Center" FontSize="9">
						R:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="2" HorizontalAlignment="Center" FontSize="9">
						G:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="3" HorizontalAlignment="Center" FontSize="9">
						B:
						<TextBlock.ToolTip>
							<ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
								<TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
							</ToolTip>
						</TextBlock.ToolTip>
					</TextBlock>
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="0" Margin="1" Name="AlphaVal" IsEnabled="False"  Text="{Binding A, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Bottom" Height="18" FontSize="9.3333" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="1" Margin="1" Name="Rval" IsEnabled="False" Text="{Binding R, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" FontSize="9.3333" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="2" Margin="1" Name="Gval" IsEnabled="False"  Text="{Binding G, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" FontSize="9.3333" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="3" Grid.Row="3" Margin="1" Name="Bval" IsEnabled="False" Text="{Binding B, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource RangedFloatToString},UpdateSourceTrigger=PropertyChanged}" FontSize="9.3333" HorizontalAlignment="Center" VerticalContentAlignment="Center" Height="18" Width="30" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <Rectangle Grid.Column="0" Grid.Row="0"  Grid.ColumnSpan="2" Margin="0,0,0,3"  Stroke ="#FF000000" StrokeThickness ="1" Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect">
                                                            <Rectangle.Fill>
                                                                <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                                                    <GradientStop Color="#FF000000" Offset="0" />
                                                                    <GradientStop Color="#FFFFFFFF" Offset="1" />
                                                                </LinearGradientBrush>
                                                            </Rectangle.Fill>
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="5,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" HorizontalAlignment="Center" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" HorizontalAlignment="Center" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"   VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Visibility="Visible" Grid.ColumnSpan="2" Name="GridPopup">
                                                    <StackPanel>
                                                        <!--<ToggleButton Name="ButtonExt" Visibility="Visible" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Height="12" Margin="0,2,0,0" HorizontalAlignment="Stretch">
                                                        </ToggleButton>-->

                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="210" Grid.Row="2" Visibility="Visible" Width="{TemplateBinding Width}" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">

                                                            <!--<Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">-->
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="80" />
                                                                            <ColumnDefinition Width="80" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">

                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="HSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                    <Condition Property="ThumbTemplate" Value="{x:Null}" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0"
                                    BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="160" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="160" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="7,3,3,3" BorderBrush="{StaticResource ContentBorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>

                                            <Border Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}"  Grid.ColumnSpan="2" Grid.Column="0" Grid.Row="0" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0" SnapsToDevicePixels="True">
                                            </Border>
                                            <Grid Grid.Row="1" Grid.Column="0" Margin="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>

                                            <Grid Grid.Column="1" Grid.Row="1" Margin="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>

                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Ellipse Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                     Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                     Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                                </Ellipse>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
                                                   HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                                                             Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>
                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="7,0,0,0" Orientation="Vertical" Grid.Row="0" Background="{shared:HSVBackgroundBrush VerticalSlider}"
                                            Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                                            Style="{StaticResource MetroSliderCustomStyleVertical}"
                                            Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />

                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor" Height="20" FontSize="9.3333" Margin="2,2,0,0" Width="68" MaxLength="9" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="17" Orientation="Horizontal">
                                            <Button Width="20" Margin="0,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="45" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="0"  Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH" Margin="2,4,0,4" FontSize="9.3333" HorizontalAlignment="Left">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="1" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" Margin="2,4,0,4" FontSize="9.3333" HorizontalAlignment="Left">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" Margin="2,4,0,4" FontSize="9.3333" HorizontalAlignment="Left">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <Slider Grid.Column="1" Grid.Row="0" x:Name="SliderH" Background="{TemplateBinding Background}" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=H, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Minimum="0" Maximum="360" Margin="5,0,0,0" />
                                        <Slider Grid.Column="1" Grid.Row="1" x:Name="SliderS" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=S, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Margin="5,0,0,0" />
                                        <Slider Grid.Column="1" Grid.Row="2" x:Name="SliderV" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=V, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Margin="5,0,0,0" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="0" Margin="2" Name="Hval" Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" BorderBrush="{StaticResource ContentBorderBrush}" IsEnabled="False" Width="35" Height="20" FontSize="9.33333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Margin="2" Name="Sval" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" BorderBrush="{StaticResource ContentBorderBrush}" IsEnabled="False" Width="35" Height="20" FontSize="9.33333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Margin="2" Name="Vval"  Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" BorderBrush="{StaticResource ContentBorderBrush}" IsEnabled="False" Width="35" Height="20" FontSize="9.33333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,2,3,1" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,3,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroRadialButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="0,2,5,1" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">

                                                    <ToggleButton Name="PopButton" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Background="{DynamicResource BackgroundBrush}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0,2,0,0" ClickMode="Press" Height="14" HorizontalAlignment="Stretch">
                                                    </ToggleButton>

                                                    <Popup Name="GradPopup" PopupAnimation="Slide" AllowsTransparency="True" MinWidth="230" StaysOpen="True" Width="230"
					   IsOpen="{Binding ElementName= PopButton, Path=IsChecked}">
                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>

                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">

                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <!--<Trigger Property="IsAlphaVisible" Value="False">
                                    <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>-->
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="HSV" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                    <Condition Property="ThumbTemplate" Value="{x:Null}" />
                </MultiTrigger.Conditions>

                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0"
                                    BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="7*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="110" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" BorderBrush="{StaticResource ContentBorderBrush}" Margin="7,3,3,3" BorderThickness="1" SnapsToDevicePixels="True">

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="1" Grid.Column="0" Margin="0">
                                                <Border CornerRadius="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Grid Grid.Column="1" Grid.Row="1" Margin="0">
                                                <Border CornerRadius="0">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Border Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0" Grid.ColumnSpan="2" Grid.Column="0" Grid.Row="0">
                                            </Border>
                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Ellipse Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                     Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                     Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                                </Ellipse>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
                                                   HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
                                                   IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="0" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                                                             Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>
                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="7,0,0,0" Orientation="Vertical" Grid.Row="0" Background="{shared:HSVBackgroundBrush VerticalSlider}"
                                            Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                                            Style="{StaticResource MetroSliderCustomStyleVertical}"
                                            Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor" Height="20" Width="68" MaxLength="9" FontSize="9.3333" Margin="2,2,0,0" VerticalAlignment="Top" Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="20" Orientation="Horizontal" VerticalAlignment="Top">
                                            <Button Width="20" Margin="0,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>

                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="45" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <RadioButton Grid.Column="0" Grid.Row="0" Margin="2,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Foreground="{TemplateBinding Foreground}" Content="H" Name="ButtomH">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=HueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="1" Content="S" Foreground="{TemplateBinding Foreground}"  Name="ButtomS" FontSize="9.3333" HorizontalAlignment="Left" Margin="2,4,0,4">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=SaturationTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>
                                        <RadioButton Grid.Column="0" Grid.Row="2" Content="V" Foreground="{TemplateBinding Foreground}"  Name="ButtomV" FontSize="9.3333" HorizontalAlignment="Left" Margin="2,4,0,4">
                                            <RadioButton.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=ValueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </RadioButton.ToolTip>
                                        </RadioButton>

                                        <Slider Grid.Column="1" Grid.Row="0" x:Name="SliderH" Background="{TemplateBinding Background}" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=H, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" Minimum="0" Maximum="360" />
                                        <Slider Grid.Column="1" Grid.Row="1" x:Name="SliderS" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=S, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                        <Slider Grid.Column="1" Grid.Row="2" x:Name="SliderV" Style="{StaticResource MetroSliderCustomStyle}" Value="{Binding Path=V, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="0" Margin="2" Name="Hval" Text="{Binding H, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Margin="2" Name="Sval" Text="{Binding S, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" BorderBrush="{StaticResource ContentBorderBrush}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Margin="2" Name="Vval"  Text="{Binding V, Converter={StaticResource FloatToString}, RelativeSource={RelativeSource TemplatedParent},UpdateSourceTrigger=PropertyChanged}" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" BorderBrush="{StaticResource ContentBorderBrush}" />
                                    </Grid>

                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <Grid Grid.Column="0"  Grid.Row="0" Margin="3,0,0,0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="15" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroLinearButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncMetroRadialButtonBackground}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>

                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">
                                                    <StackPanel>
                                                        <!--Background="{shared:SkinObject BrushBackground}"-->
                                                        <!--<ToggleButton Visibility="Visible" Name="ButtonExt" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0,2,0,0" Height="14" HorizontalAlignment="Stretch">
                                                        </ToggleButton>-->
                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="230" Grid.Row="2" Visibility="Visible" Width="230" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty"  Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="8,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>

                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                    <!--</Popup>-->
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <!--<Trigger Property="IsAlphaVisible" Value="False">
                                        <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                        <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                    </Trigger>-->
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>

                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="RGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Popup" />
                    <Condition Property="ThumbTemplate" Value="{x:Null}" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True"  Background="{TemplateBinding Background}" Margin="0,5,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="7*" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="110" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="7,3,3,3" BorderBrush="{StaticResource ContentBorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="1" Grid.Column="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,-1,0.5"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Grid Grid.Row="1" Grid.Column="1">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Border Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0">
                                            </Border>
                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Ellipse
            Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                                </Ellipse>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>

                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="7,0,0,0" Orientation="Vertical" Grid.Row="0"
                Background="{shared:HSVBackgroundBrush VerticalSlider}"
                Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                Style="{StaticResource MetroSliderCustomStyleVertical}"
                Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor"
                 Height="20" FontSize="9.3333" Margin="2,0,0,0" Width="68" MaxLength="9"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="17" Orientation="Horizontal" VerticalAlignment="Top">

                                            <Button Width="17" Margin="2,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="17" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="15" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="45" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <!--<RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />-->
                                        </Grid.RowDefinitions>
                                        <TextBlock Grid.Column="0" Grid.Row="0"  Foreground="{TemplateBinding Foreground}" Text="R" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="1" Text="G" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="2" Text="B" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="3" Text="A" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="3" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" Margin="0" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="16" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>

                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">

                                                    <ToggleButton Name="PopButton" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" Margin="0,2,0,0" ClickMode="Press" Height="14" HorizontalAlignment="Stretch">
                                                    </ToggleButton>

                                                    <Popup Name="GradPopup" PopupAnimation="Slide" AllowsTransparency="True" MinWidth="230" StaysOpen="True" Width="230"
					   IsOpen="{Binding ElementName= PopButton, Path=IsChecked}">
                                                        <Border Background="{StaticResource ContentBackgroundBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="80" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">

                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </Popup>
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="IsOpen" Value="True" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsGradientPropertyEnabled" Value="False" />
                                        <Condition Property="IsOpenGradientPropertyEditor" Value="True" />
                                    </MultiTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                    <Setter Property="IsOpen" Value="False" TargetName="GradPopup" />
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="VisualizationStyle" Value="RGB" />
                    <Condition Property="GradientPropertyEditorMode" Value="Extended" />
                    <Condition Property="ThumbTemplate" Value="{x:Null}" />
                </MultiTrigger.Conditions>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type shared:ColorEdit}">
                            <Border Background="{TemplateBinding Background}" Name="ColorEditBorder" CornerRadius="0" BorderBrush="{TemplateBinding BorderBrush}" SnapsToDevicePixels="True" BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid ClipToBounds="True" Background="{TemplateBinding Background}" Margin="0,5,2,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="90" />
                                        <ColumnDefinition Width="30" />
                                        <ColumnDefinition Width="120" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="7,3,3,3" BorderBrush="{StaticResource ContentBorderBrush}" BorderThickness="1" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition Height="15" />
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="1" Grid.Column="0">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="SelectedColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,-1,0.5" SnapsToDevicePixels="True"  Fill="{Binding Path=Color, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource ColorToBrush}}" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Grid Grid.Row="1" Grid.Column="1">
                                                <Border CornerRadius="0" BorderThickness="0" SnapsToDevicePixels="True">
                                                    <Border.BorderBrush>
                                                        <LinearGradientBrush EndPoint="0.71,0.997" StartPoint="0.71,0.846">
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.961" />
                                                            <GradientStop Color="#FFB2B2B2" Offset="0.966" />
                                                        </LinearGradientBrush>
                                                    </Border.BorderBrush>
                                                </Border>
                                                <Rectangle x:Name="CurrentColor" Stroke="{StaticResource BorderBrush}" Margin="0,0.5,0,0.5" Fill="#FFFFFFFF" RadiusX="0" RadiusY="0" />
                                            </Grid>
                                            <Border Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Name="ColorPalitte" BorderBrush="{StaticResource BorderBrush}" Background="{shared:HSVBackgroundBrush Background}" CornerRadius="0">
                                            </Border>
                                            <Canvas Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" ClipToBounds="True">
                                                <Ellipse
            Canvas.Left="{Binding Path=SelectorPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Canvas.Top="{Binding Path=SelectorPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            Stroke="{Binding InvertColor, Converter={StaticResource ColorToBrush}, RelativeSource={RelativeSource TemplatedParent}}" Width="10" Height="10">
                                                </Ellipse>
                                                <Popup Name="WordKnownColorsPopup" PlacementRectangle="0,0,0,0" AllowsTransparency="True"
            HorizontalOffset="{Binding Path=WordKnownColorsPositionX,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            VerticalOffset="{Binding Path=WordKnownColorsPositionY,RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type shared:ColorEdit}}}"
            IsOpen="{Binding Path=IsKeyboardFocusWithin, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                    <Border CornerRadius="2" ClipToBounds="True" BorderThickness="1" BorderBrush="#FF000000">
                                                        <Border.Background>
                                                            <SolidColorBrush>
                                                                <SolidColorBrush.Color>
                                                                    <Color A="200"  R="255" G="255" B="255" />
                                                                </SolidColorBrush.Color>
                                                            </SolidColorBrush>
                                                        </Border.Background>
                                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Name="WordKnownColorsTextBox" IsReadOnly="True" BorderBrush="Transparent" Foreground="#FF000000" Background="Transparent"
                Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" BorderThickness="0">
                                                        </TextBox>
                                                    </Border>
                                                </Popup>
                                            </Canvas>
                                        </Grid>
                                    </Border>

                                    <Slider Grid.Column="1" Grid.RowSpan="3" Margin="5,0,0,0" Orientation="Vertical" Grid.Row="0"
                Background="{shared:HSVBackgroundBrush VerticalSlider}"
                Maximum="{Binding Path=SliderMaxValueHSV, RelativeSource={RelativeSource TemplatedParent}}"
                Style="{StaticResource MetroSliderCustomStyleVertical}"
                Value="{Binding Path=SliderValueHSV, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <StackPanel Grid.Column="2" Grid.Row="2" Margin="3,2,0,0" Orientation="Horizontal">
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Name="PART_ColorStringEditor"
                 Height="17" FontSize="9.333" Width="68" MaxLength="9"
                 Text="{Binding Color, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource ColorToString}, RelativeSource={RelativeSource TemplatedParent}}" VerticalAlignment="Center" HorizontalAlignment="Center" VerticalContentAlignment="Center">
                                        </TextBox>
                                        <StackPanel  Name="EnableSwitch" Margin="3,0,0,2"  Height="17" Orientation="Horizontal">

                                            <Button Width="20" Margin="0,2,3,1" Name="Solid">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd" BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroSolidButtonBackground}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                            <Button Width="20" Margin="0,2,2,1" Name="Gradient">
                                                <Button.Template>
                                                    <ControlTemplate>
                                                        <Border x:Name="Bd"  BorderThickness="1" BorderBrush="{StaticResource BorderBrush}" CornerRadius="0" Background="{StaticResource SyncMetroGradientButtonBackgroundBrush}" />
														<ControlTemplate.Triggers>
														<Trigger Property="IsMouseOver" Value="True">
															<Setter Property="BorderBrush" TargetName="Bd"  Value="{StaticResource  HoverBorderBrush}" />
														</Trigger>
													</ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid Grid.Column="2" Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="15" />
                                            <ColumnDefinition Width="44" />
                                            <ColumnDefinition Width="45" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <!--<RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />-->
                                        </Grid.RowDefinitions>
                                        <TextBlock Grid.Column="0" Grid.Row="0"  Foreground="{TemplateBinding Foreground}" Text="R" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=RedTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="1" Text="G" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=GreenTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="2" Text="B" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=BlueTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <TextBlock Grid.Column="0" Grid.Row="3" Text="A" Foreground="{TemplateBinding Foreground}" Margin="4,4,0,4" FontSize="9.3333" HorizontalAlignment="Left" Width="8">
                                            <TextBlock.ToolTip>
                                                <ToolTip Style="{StaticResource MetroToolTipCustomStyle}">
                                                    <TextBlock Text="{Binding Source={StaticResource ResourceWrapperKey}, Path=AlphaTooltipText}"></TextBlock>
                                                </ToolTip>
                                            </TextBlock.ToolTip>
                                        </TextBlock>
                                        <Slider Grid.Column="1" Grid.Row="0"  Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundR}" Value="{Binding Path=R, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="1" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundG}" Value="{Binding Path=G, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="2" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundB}" Value="{Binding Path=B, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <Slider Grid.Column="1" Grid.Row="3" Style="{StaticResource MetroSliderCustomStyle}" Background="{TemplateBinding BackgroundA}" Value="{Binding Path=A, RelativeSource={RelativeSource TemplatedParent}}" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}"  Grid.Column="2" Grid.Row="0" Text="{shared:ScRGBColorExtension R}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="1" Text="{shared:ScRGBColorExtension G}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="2" Text="{shared:ScRGBColorExtension B}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                        <TextBox  Style="{StaticResource MetroTextBoxStyle}" Grid.Column="2" Grid.Row="3" Name="AlphaValue" Visibility="Visible" Text="{shared:ScRGBColorExtension A}" Margin="2" IsEnabled="False" Width="35" Height="20" FontSize="9.3333" HorizontalAlignment="Center" VerticalAlignment="Center" HorizontalContentAlignment="Left" VerticalContentAlignment="Center" />
                                    </Grid>
                                    <Border Grid.Row="3" Grid.ColumnSpan="3" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0" Name="GridBorder"  Background="Transparent" SnapsToDevicePixels="True">
                                        <Grid>
                                            <Grid Name="GridGradient" Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <Grid Grid.Column="0" Margin="3,0,0,0" Grid.Row="0">
                                                    <Canvas Height="25" x:Name="GradientBar">
                                                        <Rectangle HorizontalAlignment="Left" Width="150" Stroke="{StaticResource BorderBrush}" StrokeThickness="0.5" Height="16" x:Name="GradRect" Fill="{StaticResource SyncMetroBrushEditGradientRectBackgroundBrush}" RadiusX="0" RadiusY="0">
                                                        </Rectangle>
                                                    </Canvas>
                                                </Grid>

                                                <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="0" Margin="7,0,0,0">
                                                    <Button Width="25"  Height="20" Margin="2,0,0,0" VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="linear">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncLinearBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="radial">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border Width="15" Height="12" BorderThickness="0.5" BorderBrush="{StaticResource BorderBrush}" Background="{StaticResource SyncRadialBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                    <Button Height="20" Margin="2,0,0,0" Width="25"  VerticalAlignment="Center" BorderBrush="{StaticResource BorderBrush}" Name="Reverse">
                                                        <Button.Content>
                                                            <!--<ControlTemplate>-->
                                                            <Border BorderBrush="{StaticResource BorderBrush}" Width="15" Height="12" Background="{StaticResource SyncReverseBrush}" />
                                                            <!--</ControlTemplate>-->
                                                        </Button.Content>
                                                    </Button>
                                                </StackPanel>
                                                <Grid Grid.Row="1" Grid.ColumnSpan="2" Visibility="Visible" Name="GridPopup">
                                                    <StackPanel>
                                                        <!--Background="{shared:SkinObject BrushBackground}"-->
                                                        <!--<ToggleButton Visibility="Visible" Name="ButtonExt" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1" Background="{TemplateBinding Background}" Template="{StaticResource TogglePopupButtonTemplate}" HorizontalAlignment="Stretch" Height="14" Margin="0,2,0,0">
                                                        </ToggleButton>-->
                                                        <Border Name="GradPopup" Background="{TemplateBinding Background}" MinWidth="230" Grid.Row="2" Visibility="Visible" Width="230" Grid.ColumnSpan="2" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="0">
                                                            <!--<Popup MinWidth="250" Margin="2" Name="GradPopup" Visibility="Collapsed" Grid.Row="2" Grid.ColumnSpan="4">-->
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                    <RowDefinition Height="Auto"></RowDefinition>
                                                                </Grid.RowDefinitions>

                                                                <Grid Grid.Row="0" x:Name="LinearGrid">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="2.5*" />
                                                                        <ColumnDefinition Width="7.5*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="startx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="starty" Margin="1"  ></shared:UpDown>
                                                                    </StackPanel>
                                                                    <TextBlock Text="Start Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="End Point" FontSize="10"  VerticalAlignment="Center" Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="endx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Width="75" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  Name="endy" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                                <Grid Visibility="Collapsed" x:Name="RadialGrid" Grid.Row="1">
                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                        <RowDefinition />
                                                                    </Grid.RowDefinitions>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>

                                                                    <Grid Grid.Column="1" Grid.Row="0">
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="75" />
                                                                            <ColumnDefinition Width="75" />
                                                                        </Grid.ColumnDefinitions>

                                                                        <TextBlock Text="X" FontSize="10" Margin="15,2,0,1" Grid.Column="0" HorizontalAlignment="Center" ></TextBlock>
                                                                        <TextBlock Text="Y" FontSize="10" Margin="10,2,0,1" Grid.Column="1" HorizontalAlignment="Center" ></TextBlock>
                                                                    </Grid>

                                                                    <TextBlock Text="Gradient Origin" FontSize="10"  VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="1" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Centre" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Row="2" Grid.Column="0"></TextBlock>
                                                                    <TextBlock Text="Radius" Grid.Row="3" FontSize="10" VerticalAlignment="Center"  Margin="4,2,2,2" Grid.Column="0"></TextBlock>

                                                                    <StackPanel Orientation="Horizontal" Margin="2"  Grid.Column="1" Grid.Row="1">
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="gradx" Margin="1" ></shared:UpDown>
                                                                        <shared:UpDown Visibility="Visible"  Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25" x:Name="grady" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="2">
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrex" Margin="1"></shared:UpDown>
                                                                        <shared:UpDown Width="70" Step="0.01" MinValue="-1" MaxValue="1" Height="25"  x:Name="centrey" Margin="1"></shared:UpDown>
                                                                    </StackPanel>
                                                                    <StackPanel Orientation="Horizontal" Margin="2" Grid.Column="1" Grid.Row="3">
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusx" Margin="1"  ></shared:UpDown>
                                                                        <shared:UpDown Width="70" Height="25" Step="0.01" MinValue="-1" MaxValue="1" Name="radiusy" Margin="1" ></shared:UpDown>
                                                                    </StackPanel>
                                                                </Grid>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                    <!--</Popup>-->
                                                </Grid>
                                            </Grid>
                                        </Grid>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <!--<Trigger Property="IsAlphaVisible" Value="False">
                                        <Setter TargetName="AlphaLabel" Property="Visibility" Value="Collapsed"></Setter>
                                        <Setter TargetName="AlphaVal" Property="Visibility" Value="Collapsed"></Setter>
                                    </Trigger>-->
                                <Trigger Property="EnableGradientToSolidSwitch" Value="false">
                                    <Setter TargetName="EnableSwitch" Property="Visibility" Value="Collapsed"></Setter>
                                    <Setter TargetName="PART_ColorStringEditor" Property="Width" Value="115" />
                                </Trigger>
                                <Trigger Property="BrushMode" Value="Solid">
                                    <Setter TargetName="GridGradient" Property="Visibility" Value="Collapsed"></Setter>
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="True">
                                    <Setter Property="Visibility" Value="Visible" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Visible" TargetName="LinearGrid" />
                                </Trigger>
                                <Trigger Property="IsOpenGradientPropertyEditor" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GradPopup" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="LinearGrid" />
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="RadialGrid" />
                                </Trigger>
                                <Trigger Property="IsGradientPropertyEnabled" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" TargetName="GridBorder" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </MultiTrigger>
            <!-- End Custom ThumbTemplate Styles -->
        </Style.Triggers>
    </Style>

    <Style BasedOn="{StaticResource MetroColorEditStyle}" TargetType="{x:Type shared:ColorEdit}" />

    <!--ColorPickerStyle-->
    <Style x:Key="MetroColorPickerStyle" TargetType="{x:Type shared:ColorPicker}">
        <Setter Property="MinWidth" Value="25" />
        <Setter Property="Height" Value="28" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="Focusable" Value="False" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="BorderBrush" Value="{StaticResource ContentBorderBrush}" />
        <Setter Property="Background" Value="{StaticResource  ContentBackgroundBrush}" />
        <Setter Property="Foreground" Value="{StaticResource ContentForegroundBrush}" />
        <Setter Property="ColorEditBackground" Value="{StaticResource ContentBackgroundBrush}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type shared:ColorPicker}">
                    <Border Name="mainBorder"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{StaticResource   ContentBorderBrush}"  SnapsToDevicePixels="True"
                        BorderThickness="1">
                        <Grid Margin="{TemplateBinding Padding}">
                            <ToggleButton Grid.Column="2" Command="shared:ColorPicker.M_displayPopup" Name="colorToggleButton" Style="{StaticResource ToggleDropDownButtonStyle}" ClickMode="Press">
                                <StackPanel Orientation="Horizontal">
                                    <Border Name="selectedColorRect" HorizontalAlignment="Left" BorderBrush="{StaticResource BorderBrush}"
                                        Background="{TemplateBinding Color, Converter={StaticResource ColorToBrush}}"
                                        Width="20" Height="20" Margin="2" />

                                    <TextBlock Foreground="{TemplateBinding Foreground}"
                                        HorizontalAlignment="Left" VerticalAlignment="Center" Name="SelectedColorText"
                                        Text="{TemplateBinding Color, Converter={StaticResource ColorToWordKnownColors}}" />
                                </StackPanel>
                            </ToggleButton>

                            <Popup Name="colorEditPopup" PopupAnimation="Slide" AllowsTransparency="True"  StaysOpen="False" MinWidth="230"
					               IsOpen="{Binding ElementName= colorToggleButton, Path=IsChecked}">
                                <Border Padding="0,1,0,0">
                                    <StackPanel Background="{StaticResource ContentBackgroundBrush}">
                                        <shared:ColorEdit Name="ColorEdit" VisualizationStyle="{TemplateBinding VisualizationStyle}" />
                                        <Border Name="systemColorsPanel" Visibility="Collapsed"
								        DataContext="{Binding Source={StaticResource ColorList}}">
                                            <ComboBox Name="systemColors" DockPanel.Dock="Left" Margin="4,2,4,4"
									        ItemsSource="{Binding}"
									        ItemTemplate = "{StaticResource ColorItemTemplate}"
									        IsSynchronizedWithCurrentItem="True" />
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </Popup>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocusWithin" Value="True">
                            <Setter Property="Background"  TargetName="mainBorder"  Value="{StaticResource ContentBackgroundBrush}" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="BorderBrush" TargetName="mainBorder"  Value="{StaticResource  HoverBorderBrush}" />
                            <Setter Property="BorderBrush" TargetName="colorToggleButton"  Value="{StaticResource  HoverBorderBrush}" />
                        </Trigger>
                        <Trigger Property="IsChecked" Value="True" SourceName="colorToggleButton">

                            <Setter Property="BorderBrush" TargetName="mainBorder"  Value="{StaticResource  ActiveBorderBrush}" />
                        </Trigger>                        <DataTrigger Binding="{Binding Path=IsColorPaletteVisible, RelativeSource={RelativeSource Self}}" Value="True">
                            <Setter TargetName="ColorEdit" Property="BorderThickness" Value="1,1,1,0" />
                            <Setter TargetName="systemColorsPanel" Property="BorderBrush" Value="{Binding ElementName=ColorEdit, Path=BorderBrush}" />
                            <Setter TargetName="systemColorsPanel" Property="Visibility" Value="Visible" />
                            <Setter TargetName="systemColorsPanel" Property="BorderThickness" Value="1,0,1,1" />
                        </DataTrigger>
                        <Trigger Property="shared:SkinStorage.EnableTouch" Value="True">
                            <Setter Property="MinWidth" TargetName="colorEditPopup" Value="360" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style BasedOn="{StaticResource MetroColorPickerStyle}" TargetType="{x:Type shared:ColorPicker}" />
</ResourceDictionary>
